{"version":3,"sources":["compression/compressors.tsx","components/CompressorSettingsEditor.tsx","compression/utils.ts","compression/algorithms.ts","visualization/common.ts","visualization/drawing.tsx","visualization/PhrasesVisualization.tsx","components/CompressorOutput.tsx","pages/Compare.tsx","visualization/LzLikeVisualization.tsx","visualization/RlzVisualization.tsx","visualization/RelzVisualization.tsx","visualization/RelzRecVisualization.tsx","components/EmbedUrl.tsx","components/StepControls.tsx","hooks.ts","pages/StepByStep.tsx","components/AppNavbar.tsx","pages/Embed.tsx","pages/Quiz.tsx","pages/Home.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["availableCompressors","lz77","type","title","needsReference","needsPrefixSize","needsWindowSize","needsRecursionLimit","rlz","relz","CompressorSettingEditor","props","settings","update","onChange","compressor","Card","className","Header","Row","Col","Button","variant","size","onClick","remove","icon","faTrashAlt","Body","Form","Group","as","Label","column","xs","Control","value","windowSize","min","e","parseInt","target","prefixSize","recursionLimit","reference","indexOfSubArray","array","subarray","outer","i","length","h","lastIndexOfSubArray","stringToCodePoints","input","result","codePoint","codePointAt","push","compressLz77","compressWithSlidingWindow","compressRlz","pos","phraseLength","lastOccurrence","currentPhrase","slice","currentOccurrence","symbol","l","p","windowStart","Math","max","compressRlzPrefix","prefixLength","prefixPhrases","suffixPhrases","phrase","relzMapping","symbolToPhraseMapping","Map","contentToSymbolMapping","mappedInput","getMapping","currentContent","content","isEqual","newMetaSymbol","set","extractLzLikeParsing","phrases","mapping","positionOffset","sum","map","mappedPhrase","get","undefined","Error","mappedPos","sumBy","c","mappedLength","compressRelzRecursive","passes","metaSymbols","metaSymbolsPhrases","suffixPhrasesCompressed","suffixMetaSymbols","suffixMetaSymbolsPhrases","phrasesCompressed","computeData","codePoints","steps","range","referenceCodePoints","firstPassPhrases","metaSymbolPhrases","compressRelz","lastPass","flatMap","pass","reverse","suffixPhrase","TARGET_COLOR","SOURCE_COLOR","SharedDefinitions","id","markerWidth","markerHeight","refX","refY","orient","points","gradientTransform","offset","stopColor","Arrow","x1","x2","y","d","stroke","fill","Arrow2","y1","y2","straight","v1","v2","markerEnd","Character","x","text","color","w","width","height","onMouseEnter","onMouseLeave","style","overflowY","textAlign","verticalAlign","lineHeight","userSelect","CurlyBrace","q","dx","dy","len","sqrt","qx1","qy1","qx2","qy2","tx1","ty1","qx3","qy3","qx4","qy4","path","PhraseDisplay","transform","abs","PhrasesVisualization","data","useState","highlightedPhraseIdx","setHighlightedPhraseIdx","highlightedPhrase","characters","split","referenceArrow","forEach","String","fromCodePoint","CompressorOutput","toFixed","Compare","setInput","compressorType","setCompressorType","keys","compressorSettings","setCompressorSettings","Container","FormControl","placeholder","lg","md","Dropdown","ButtonGroup","Toggle","Menu","entries","Item","idx","newSettings","filter","v","LzLikeVisualization","step","currentStep","phraseCount","take","RlzVisualization","refCharacters","RelzVisualization","RelzRecVisualization","lineDistance","console","log","passOffsets","reduce","lengths","last","passesVisible","phrasesVisible","mappingsVisible","currentBackMappingPass","phraseDisplays","mappingArrows","drop","passIdx","pi","metaPhrase","dropWhile","passCharacters","EmbedUrl","includeStep","setIncludeStep","embedVisualization","setEmbedVisualization","currentQuery","URLSearchParams","pathname","url","window","location","origin","toString","InputGroup","readOnly","Append","navigator","clipboard","writeText","Check","custom","label","checked","StepControls","stepsTotal","stepChanged","updateStep","newStep","fluid","disabled","faFastBackward","faBackward","faForward","faFastForward","useQuery","useLocation","useMemo","search","useSettingsFromQuery","query","prefix","recursion","includes","StepByStep","setCurrentStep","selectedCompressor","setSelectedCompressor","currentCompressor","referenceString","setReferenceString","setWindowSize","setPrefixSize","setRecursionLimit","useEffect","values","name","AppNavbar","links","to","faBalanceScaleRight","faStepForward","faQuestion","Navbar","collapseOnSelect","expand","bg","Brand","Link","Collapse","Nav","active","href","faGithub","Embed","initialStep","setStep","position","bottom","Quiz","Home","Jumbotron","App","embedded","has","useEmbedState","exact","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.35eb6df2.chunk.js","sourcesContent":["export type CompressorType =\n  | \"lz77\"\n  | \"lz-sw\"\n  | \"rlz\"\n  | \"rlz-pref\"\n  | \"relz\"\n  | \"relz-rec\";\n\nexport type CompressorSettings =\n  | {\n      type: \"lz77\";\n    }\n  | {\n      type: \"lz-sw\";\n      windowSize?: number;\n    }\n  | {\n      type: \"rlz\";\n      reference: string;\n    }\n  | {\n      type: \"rlz-pref\";\n      prefixLength: number;\n    }\n  | {\n      type: \"relz\";\n      prefixLength: number;\n    }\n  | {\n      type: \"relz-rec\";\n      prefixLength: number;\n      recursionLimit?: number;\n    };\n\nexport function initialCompressorSettings(\n  type: CompressorType\n): CompressorSettings {\n  if (type === \"lz77\") {\n    return { type: \"lz77\" };\n  } else if (type === \"lz-sw\") {\n    return { type: \"lz-sw\", windowSize: 5 };\n  } else if (type === \"rlz\") {\n    return { type: \"rlz\", reference: \"\" };\n  } else if (type === \"rlz-pref\") {\n    return { type: \"rlz-pref\", prefixLength: 5 };\n  } else if (type === \"relz\") {\n    return { type: \"relz\", prefixLength: 5 };\n  } /* else if (type === \"relz-rec\") */ else {\n    return { type: \"relz-rec\", prefixLength: 5 };\n  }\n}\n\nexport interface Compressor {\n  type: CompressorType;\n  title: string;\n  needsReference: boolean;\n  needsPrefixSize: boolean;\n  needsWindowSize: boolean;\n  needsRecursionLimit: boolean;\n}\n\nexport const availableCompressors: { [type in CompressorType]: Compressor } = {\n  lz77: {\n    type: \"lz77\",\n    title: \"LZ77\",\n    needsReference: false,\n    needsPrefixSize: false,\n    needsWindowSize: false,\n    needsRecursionLimit: false,\n  },\n  \"lz-sw\": {\n    type: \"lz-sw\",\n    title: \"LZ with sliding window\",\n    needsReference: false,\n    needsPrefixSize: false,\n    needsWindowSize: true,\n    needsRecursionLimit: false,\n  },\n  rlz: {\n    type: \"rlz\",\n    title: \"RLZ\",\n    needsReference: true,\n    needsPrefixSize: false,\n    needsWindowSize: false,\n    needsRecursionLimit: false,\n  },\n  \"rlz-pref\": {\n    type: \"rlz-pref\",\n    title: \"RLZ using prefix\",\n    needsReference: false,\n    needsPrefixSize: true,\n    needsWindowSize: false,\n    needsRecursionLimit: false,\n  },\n  relz: {\n    type: \"relz\",\n    title: \"ReLZ\",\n    needsReference: false,\n    needsPrefixSize: true,\n    needsWindowSize: false,\n    needsRecursionLimit: false,\n  },\n  \"relz-rec\": {\n    type: \"relz-rec\",\n    title: \"Recursive ReLZ\",\n    needsReference: false,\n    needsPrefixSize: true,\n    needsWindowSize: false,\n    needsRecursionLimit: true,\n  },\n};\n","import { faTrash, faTrashAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React from \"react\";\nimport Button from \"react-bootstrap/esm/Button\";\nimport Card from \"react-bootstrap/esm/Card\";\nimport Col from \"react-bootstrap/esm/Col\";\nimport Form from \"react-bootstrap/esm/Form\";\nimport Row from \"react-bootstrap/esm/Row\";\nimport {\n  availableCompressors,\n  CompressorSettings,\n  CompressorType,\n} from \"../compression/compressors\";\nimport { Settings } from \"../visualization/common\";\n\ninterface CompressorSettingsEditorProps {\n  type: CompressorType;\n  settings: Settings;\n  onChange?: (settings: Settings) => void;\n  remove?: () => void;\n}\n\nexport function CompressorSettingEditor(\n  props: CompressorSettingsEditorProps\n): JSX.Element {\n  const { type, settings } = props;\n\n  function update(settings: Settings) {\n    if (props.onChange) {\n      props.onChange(settings);\n    }\n  }\n\n  const compressor = availableCompressors[type];\n\n  return (\n    <Card className=\"h-100\">\n      <Card.Header>\n        <Row className=\"d-flex align-items-center\">\n          <Col>\n            <h6>{compressor.title}</h6>\n          </Col>\n          <Col>\n            <Button\n              variant=\"outline-danger\"\n              className=\"float-right\"\n              size=\"sm\"\n              onClick={() => props.remove && props.remove()}\n            >\n              Remove <FontAwesomeIcon icon={faTrashAlt} />\n            </Button>\n          </Col>\n        </Row>\n      </Card.Header>\n      <Card.Body>\n        {type === \"lz77\" && \"no settings\"}\n        <Form>\n          {compressor.needsWindowSize && (\n            <Form.Group as={Row}>\n              <Form.Label column xs=\"4\">\n                Window Size\n              </Form.Label>\n              <Col xs=\"8\">\n                <Form.Control\n                  type=\"number\"\n                  value={settings.windowSize}\n                  min={0}\n                  onChange={(e) =>\n                    update({\n                      ...settings,\n                      windowSize: parseInt(e.target.value),\n                    })\n                  }\n                />\n              </Col>\n            </Form.Group>\n          )}\n          {compressor.needsPrefixSize && (\n            <Form.Group as={Row}>\n              <Form.Label column xs=\"4\">\n                Prefix Length\n              </Form.Label>\n              <Col xs=\"8\">\n                <Form.Control\n                  type=\"number\"\n                  value={settings.prefixSize}\n                  min={0}\n                  onChange={(e) =>\n                    update({\n                      ...settings,\n                      prefixSize: parseInt(e.target.value),\n                    })\n                  }\n                />\n              </Col>\n            </Form.Group>\n          )}\n          {compressor.needsRecursionLimit && (\n            <Form.Group as={Row}>\n              <Form.Label column xs=\"4\">\n                Recursion Limit\n              </Form.Label>\n              <Col xs=\"8\">\n                <Form.Control\n                  type=\"number\"\n                  value={settings.recursionLimit}\n                  min={0}\n                  onChange={(e) =>\n                    update({\n                      ...settings,\n                      recursionLimit: parseInt(e.target.value),\n                    })\n                  }\n                />\n              </Col>\n            </Form.Group>\n          )}\n          {compressor.needsReference && (\n            <Form.Group as={Row}>\n              <Form.Label column xs=\"4\">\n                Reference String\n              </Form.Label>\n              <Col xs=\"8\">\n                <Form.Control\n                  type=\"text\"\n                  value={settings.reference}\n                  onChange={(e) =>\n                    update({\n                      ...settings,\n                      reference: e.target.value,\n                    })\n                  }\n                />\n              </Col>\n            </Form.Group>\n          )}\n        </Form>\n      </Card.Body>\n    </Card>\n  );\n}\n","export function indexOfSubArray<T>(array: T[], subarray: T[]): number {\n  outer: for (let i = 0; i <= array.length - subarray.length; i++) {\n    for (let h = 0; h < subarray.length; h++) {\n      if (array[i + h] !== subarray[h]) {\n        continue outer;\n      }\n    }\n    return i;\n  }\n\n  return -1;\n}\n\nexport function lastIndexOfSubArray<T>(array: T[], subarray: T[]): number {\n  outer: for (let i = array.length - subarray.length; i >= 0; i--) {\n    for (let h = 0; h < subarray.length; h++) {\n      if (array[i + h] !== subarray[h]) {\n        continue outer;\n      }\n    }\n    return i;\n  }\n\n  return -1;\n}\n\nexport function stringToCodePoints(input: string): number[] {\n  const result = [];\n\n  for (var i = 0; i < input.length; i++) {\n    var codePoint = input.codePointAt(i);\n\n    if (!codePoint) {\n      break;\n    }\n\n    result.push(codePoint);\n  }\n\n  return result;\n}\n\nexport function codePointsToString(...codePoints: number[]): string {\n  return String.fromCodePoint(...codePoints);\n}\n","import { indexOfSubArray, lastIndexOfSubArray } from \"./utils\";\nimport { isEqual, sum, sumBy } from \"lodash\";\n\nexport type Phrase =\n  | {\n      type: \"literal\";\n      symbol: number;\n      pos: number;\n      l: 1;\n    }\n  | {\n      type: \"copy\";\n      pos: number;\n      p: number;\n      l: number;\n    };\n\nexport type RlzPhrase = { rlz: true } & (\n  | {\n      type: \"literal\";\n      symbol: number;\n      pos: number;\n      l: 1;\n    }\n  | {\n      type: \"copy\";\n      pos: number;\n      p: number;\n      l: number;\n    }\n);\n\nexport function* compressLz77(input: number[]): Generator<Phrase> {\n  let pos = 0;\n  while (pos < input.length) {\n    let phraseLength = 0;\n    let lastOccurrence = 0;\n    while (pos + phraseLength < input.length) {\n      let currentPhrase = input.slice(pos, pos + phraseLength + 1);\n      let currentOccurrence = lastIndexOfSubArray(\n        input.slice(0, pos + phraseLength),\n        currentPhrase\n      );\n      if (currentOccurrence !== -1) {\n        phraseLength++;\n        lastOccurrence = currentOccurrence;\n      } else {\n        break;\n      }\n    }\n\n    if (phraseLength === 0) {\n      yield { type: \"literal\", pos, symbol: input[pos], l: 1 };\n      pos += 1;\n    } else {\n      yield { type: \"copy\", pos, p: lastOccurrence, l: phraseLength };\n      pos += phraseLength;\n    }\n  }\n}\n\nexport function* compressWithSlidingWindow(\n  input: number[],\n  windowSize: number\n): Generator<Phrase> {\n  let pos = 0;\n  while (pos < input.length) {\n    let phraseLength = 0;\n    let lastOccurrence = 0;\n    while (pos + phraseLength < input.length) {\n      let currentPhrase = input.slice(pos, pos + phraseLength + 1);\n      const windowStart = Math.max(0, pos - windowSize);\n      let currentOccurrence = lastIndexOfSubArray(\n        input.slice(\n          windowStart,\n          Math.min(windowStart + windowSize, pos + phraseLength)\n        ),\n        currentPhrase\n      );\n      if (currentOccurrence !== -1) {\n        phraseLength++;\n        lastOccurrence = currentOccurrence + windowStart;\n      } else {\n        break;\n      }\n    }\n\n    if (phraseLength === 0) {\n      yield { type: \"literal\", pos, symbol: input[pos], l: 1 };\n      pos += 1;\n    } else {\n      yield { type: \"copy\", pos, p: lastOccurrence, l: phraseLength };\n      pos += phraseLength;\n    }\n  }\n}\n\nexport function decompress(phrases: Phrase[]): number[] {\n  let output: number[] = [];\n  for (const phrase of phrases) {\n    if (phrase.type === \"literal\") {\n      output.push(phrase.symbol);\n    } else {\n      for (let i = 0; i < phrase.l; i++) {\n        output.push(output[phrase.p + i]);\n      }\n    }\n  }\n\n  return output;\n}\n\nexport function* compressRlz(\n  input: number[],\n  reference: number[]\n): Generator<RlzPhrase> {\n  let pos = 0;\n  while (pos < input.length) {\n    let phraseLength = 0;\n    let lastOccurrence = 0;\n    while (pos + phraseLength < input.length) {\n      let currentPhrase = input.slice(pos, pos + phraseLength + 1);\n      let currentOccurrence = indexOfSubArray(reference, currentPhrase);\n      if (currentOccurrence !== -1) {\n        phraseLength++;\n        lastOccurrence = currentOccurrence;\n      } else {\n        break;\n      }\n    }\n\n    if (phraseLength === 0) {\n      yield { rlz: true, type: \"literal\", pos, symbol: input[pos], l: 1 };\n      pos += 1;\n    } else {\n      yield {\n        rlz: true,\n        type: \"copy\",\n        pos,\n        p: lastOccurrence,\n        l: phraseLength,\n      };\n      pos += phraseLength;\n    }\n  }\n}\n\nexport function decompressRlz(\n  phrases: RlzPhrase[],\n  reference: number[]\n): number[] {\n  let output: number[] = [];\n  for (const phrase of phrases) {\n    if (phrase.type === \"literal\") {\n      output.push(phrase.symbol);\n    } else {\n      for (let i = 0; i < phrase.l; i++) {\n        output.push(reference[phrase.p + i]);\n      }\n    }\n  }\n\n  return output;\n}\n\nexport function compressRlzPrefix(\n  input: number[],\n  prefixLength: number\n): [Phrase[], Phrase[]] {\n  const prefixPhrases: Phrase[] = [];\n  const suffixPhrases: Phrase[] = [];\n  let pos = 0;\n  while (pos < input.length) {\n    let phraseLength = 0;\n    let lastOccurrence = 0;\n    while (pos + phraseLength < input.length) {\n      let currentPhrase = input.slice(pos, pos + phraseLength + 1);\n      let currentOccurrence = lastIndexOfSubArray(\n        input.slice(0, Math.min(pos + phraseLength, prefixLength)),\n        currentPhrase\n      );\n      if (\n        currentOccurrence !== -1 &&\n        (pos >= prefixLength || pos + phraseLength < prefixLength)\n      ) {\n        phraseLength++;\n        lastOccurrence = currentOccurrence;\n      } else {\n        break;\n      }\n    }\n\n    if (phraseLength === 0) {\n      const phrase: Phrase = { type: \"literal\", pos, symbol: input[pos], l: 1 };\n      if (pos < prefixLength) {\n        prefixPhrases.push(phrase);\n      } else {\n        suffixPhrases.push(phrase);\n      }\n      pos += 1;\n    } else {\n      const phrase: Phrase = {\n        type: \"copy\",\n        pos,\n        p: lastOccurrence,\n        l: phraseLength,\n      };\n      if (pos < prefixLength) {\n        prefixPhrases.push(phrase);\n      } else {\n        suffixPhrases.push(phrase);\n      }\n      pos += phraseLength;\n    }\n  }\n\n  return [prefixPhrases, suffixPhrases];\n}\n\nexport function relzMapping(\n  input: Phrase[],\n  reference: number[]\n): [Map<number, Phrase>, number[]] {\n  const symbolToPhraseMapping: Map<number, Phrase> = new Map();\n  const contentToSymbolMapping: [number[], number][] = [];\n  const mappedInput: number[] = [];\n\n  function getMapping(phrase: Phrase): number {\n    const currentContent =\n      phrase.type === \"literal\"\n        ? [phrase.symbol]\n        : reference.slice(phrase.p, phrase.p + phrase.l);\n    for (const [content, symbol] of contentToSymbolMapping) {\n      if (isEqual(content, currentContent)) {\n        return symbol;\n      }\n    }\n\n    const newMetaSymbol = symbolToPhraseMapping.size;\n    symbolToPhraseMapping.set(newMetaSymbol, phrase);\n    contentToSymbolMapping.push([currentContent, newMetaSymbol]);\n    return newMetaSymbol;\n  }\n\n  for (const phrase of input) {\n    mappedInput.push(getMapping(phrase));\n  }\n\n  return [symbolToPhraseMapping, mappedInput];\n}\n\nfunction extractLzLikeParsing(\n  phrases: Phrase[],\n  mapping: Map<number, Phrase>,\n  input: number[],\n  positionOffset: number\n): Phrase[] {\n  const result: Phrase[] = [];\n\n  for (let i = 0; i < phrases.length; i++) {\n    const pos = sum(result.map((p) => p.l)) + positionOffset;\n    const phrase = phrases[i];\n    if (phrase.type === \"literal\") {\n      const mappedPhrase = mapping.get(phrase.symbol);\n      if (mappedPhrase === undefined) {\n        throw new Error(\"no mapping for symbol \" + phrase.symbol);\n      }\n      result.push({\n        ...mappedPhrase,\n        pos,\n      });\n    } else {\n      const mappedPos =\n        sumBy(\n          input.slice(0, phrase.p).map((c) => mapping.get(c)),\n          (p) => p!.l\n        ) + positionOffset;\n      const mappedLength = sumBy(\n        input.slice(phrase.p, phrase.p + phrase.l).map((c) => mapping.get(c)),\n        (p) => p!.l\n      );\n\n      result.push({ type: \"copy\", pos, p: mappedPos, l: mappedLength });\n    }\n  }\n\n  return result;\n}\n\ninterface RelzResult {\n  firstPassPhrases: Phrase[];\n  metaSymbols: number[];\n  metaSymbolPhrases: Phrase[];\n  phrases: Phrase[];\n}\n\nexport function compressRelz(\n  input: number[],\n  prefixLength: number\n): RelzResult {\n  const [prefixPhrases, suffixPhrases] = [\n    ...compressRlzPrefix(input, prefixLength),\n  ];\n  const firstPassPhrases = [...prefixPhrases, ...suffixPhrases];\n  const [mapping, metaSymbols] = relzMapping(firstPassPhrases, input);\n  const metaSymbolPhrases = [...compressLz77(metaSymbols)];\n  const resultPhrases = extractLzLikeParsing(\n    metaSymbolPhrases,\n    mapping,\n    metaSymbols,\n    0\n  );\n\n  return {\n    firstPassPhrases,\n    metaSymbols,\n    metaSymbolPhrases,\n    phrases: resultPhrases,\n  };\n}\n\nexport interface RelzRecPass {\n  input: number[];\n  prefixPhrases: Phrase[];\n  suffixPhrases: Phrase[];\n  suffixMetaSymbols: number[];\n  suffixMetaSymbolsPhrases: Phrase[];\n  suffixPhrasesCompressed: Phrase[];\n  phrasesCompressed: Phrase[];\n}\nexport interface RelzRecursiveResult {\n  passes: RelzRecPass[];\n  phrases: Phrase[];\n}\n\nexport function compressRelzRecursive(\n  input: number[],\n  prefixLength: number,\n  recursionLimit: number | undefined = undefined\n): RelzRecursiveResult {\n  if (recursionLimit === 0) {\n    return {\n      passes: [],\n      phrases: input.map((c, pos) => ({\n        type: \"literal\",\n        pos,\n        symbol: c,\n        l: 1,\n      })),\n    };\n  }\n\n  const [prefixPhrases, suffixPhrases] = [\n    ...compressRlzPrefix(input, prefixLength),\n  ];\n  if (suffixPhrases.length > 0) {\n    const [mapping, metaSymbols] = relzMapping(\n      suffixPhrases,\n      input.slice(0, prefixLength)\n    );\n    const result = compressRelzRecursive(\n      metaSymbols,\n      prefixLength,\n      recursionLimit && recursionLimit - 1\n    );\n    const metaSymbolsPhrases = result.phrases;\n    const suffixPhrasesCompressed = extractLzLikeParsing(\n      metaSymbolsPhrases,\n      mapping,\n      metaSymbols,\n      prefixLength\n    );\n    const phrases = [...prefixPhrases, ...suffixPhrasesCompressed];\n\n    return {\n      passes: [\n        {\n          input,\n          prefixPhrases,\n          suffixPhrases,\n          suffixMetaSymbols: metaSymbols,\n          suffixMetaSymbolsPhrases: metaSymbolsPhrases,\n          suffixPhrasesCompressed,\n          phrasesCompressed: phrases,\n        },\n        ...result.passes,\n      ],\n      phrases,\n    };\n  } else {\n    return {\n      passes: [\n        {\n          input,\n          prefixPhrases,\n          suffixPhrases: [],\n          suffixMetaSymbols: [],\n          suffixMetaSymbolsPhrases: [],\n          suffixPhrasesCompressed: [],\n          phrasesCompressed: prefixPhrases,\n        },\n      ],\n      phrases: prefixPhrases,\n    };\n  }\n}\n","import { range, reverse } from \"lodash\";\nimport {\n  compressLz77,\n  compressRelz,\n  compressRelzRecursive,\n  compressRlz,\n  compressRlzPrefix,\n  compressWithSlidingWindow,\n  Phrase,\n  RelzRecPass,\n  RlzPhrase,\n} from \"../compression/algorithms\";\nimport { stringToCodePoints } from \"../compression/utils\";\nimport { CompressorType } from \"../compression/compressors\";\n\nexport type LzStep =\n  | { type: \"initial\" }\n  | { type: \"compress\"; phrase: number }\n  | { type: \"result\" };\n\nexport interface LzLikeVisualizationData {\n  type: \"lz-like\";\n  input: string;\n  phrases: Phrase[];\n  steps: LzStep[];\n  windowSize?: number;\n  prefixLength?: number;\n}\n\nexport interface RlzVisualizationData {\n  type: \"rlz\";\n  input: string;\n  reference: string;\n  phrases: RlzPhrase[];\n  steps: LzStep[];\n}\n\ntype RelzStep =\n  | { type: \"initial\" }\n  | { type: \"compress-first\"; phrase: number }\n  | { type: \"mapping\" }\n  | { type: \"compress-second\"; phrase: number }\n  | { type: \"back-mapping\"; phrase: number };\n\nexport interface RelzVisualizationData {\n  type: \"relz\";\n  input: string;\n  prefixLength: number;\n  firstPassPhrases: Phrase[];\n  metaSymbols: number[];\n  metaSymbolPhrases: Phrase[];\n  phrases: Phrase[];\n  steps: RelzStep[];\n}\n\ntype RelzRecStep =\n  | { type: \"initial\" }\n  | { type: \"compress\"; pass: number; phrase: number }\n  | { type: \"mapping\"; pass: number }\n  | { type: \"back-mapping\"; pass: number; suffixPhrase: number };\n\nexport interface RelzRecVisualizationData {\n  type: \"relz-rec\";\n  input: string;\n  prefixLength: number;\n  passes: RelzRecPass[];\n  phrases: Phrase[];\n  steps: RelzRecStep[];\n}\n\nexport type VisualizationData =\n  | LzLikeVisualizationData\n  | RlzVisualizationData\n  | RelzVisualizationData\n  | RelzRecVisualizationData;\n\nexport interface Settings {\n  windowSize: number;\n  prefixSize: number;\n  reference: string;\n  recursionLimit: number;\n}\n\nexport function computeData(\n  type: CompressorType,\n  input: string,\n  settings: Settings\n): VisualizationData {\n  const codePoints = stringToCodePoints(input);\n  if (type === \"lz77\") {\n    const phrases = [...compressLz77(codePoints)];\n    const steps: LzStep[] = [\n      { type: \"initial\" },\n      ...range(phrases.length).map((phrase) => ({\n        type: \"compress\" as const,\n        phrase,\n      })),\n      { type: \"result\" },\n    ];\n    return { type: \"lz-like\", input, steps, phrases };\n  } else if (type === \"lz-sw\") {\n    const phrases = [\n      ...compressWithSlidingWindow(codePoints, settings.windowSize),\n    ];\n    const steps: LzStep[] = [\n      { type: \"initial\" },\n      ...range(phrases.length).map((phrase) => ({\n        type: \"compress\" as const,\n        phrase,\n      })),\n      { type: \"result\" },\n    ];\n    return {\n      type: \"lz-like\",\n      input,\n      phrases,\n      windowSize: settings.windowSize,\n      steps,\n    };\n  } else if (type === \"rlz\") {\n    const { reference } = settings;\n    const referenceCodePoints = stringToCodePoints(reference);\n    const phrases = [...compressRlz(codePoints, referenceCodePoints)];\n    const steps: LzStep[] = [\n      { type: \"initial\" },\n      ...range(phrases.length).map((phrase) => ({\n        type: \"compress\" as const,\n        phrase,\n      })),\n      { type: \"result\" },\n    ];\n    return {\n      type: \"rlz\",\n      input,\n      reference,\n      phrases,\n      steps,\n    };\n  } else if (type === \"rlz-pref\") {\n    const [prefixPhrases, suffixPhrases] = [\n      ...compressRlzPrefix(codePoints, settings.prefixSize),\n    ];\n    const phrases = [...prefixPhrases, ...suffixPhrases];\n    const steps: LzStep[] = [\n      { type: \"initial\" },\n      ...range(phrases.length).map((phrase) => ({\n        type: \"compress\" as const,\n        phrase,\n      })),\n      { type: \"result\" },\n    ];\n    return {\n      type: \"lz-like\",\n      input,\n      phrases,\n      prefixLength: settings.prefixSize,\n      steps,\n    };\n  } else if (type === \"relz\") {\n    const result = compressRelz(codePoints, settings.prefixSize);\n    const steps: RelzStep[] = [\n      { type: \"initial\" },\n      ...range(result.firstPassPhrases.length).map((phrase) => ({\n        type: \"compress-first\" as const,\n        phrase,\n      })),\n      { type: \"mapping\" },\n      ...range(result.metaSymbolPhrases.length).map((phrase) => ({\n        type: \"compress-second\" as const,\n        phrase,\n      })),\n      ...range(result.phrases.length).map((phrase) => ({\n        type: \"back-mapping\" as const,\n        phrase,\n      })),\n    ];\n    return {\n      type: \"relz\",\n      input,\n      prefixLength: settings.prefixSize,\n      ...result,\n      steps,\n    };\n  } else {\n    const result = compressRelzRecursive(\n      codePoints,\n      settings.prefixSize,\n      settings.recursionLimit\n    );\n    const lastPass = result.passes.length - 1;\n    const steps: RelzRecStep[] = [\n      { type: \"initial\" },\n      ...result.passes.flatMap((pass, i) => [\n        ...pass.prefixPhrases.map((p, h) => ({\n          type: \"compress\" as const,\n          pass: i,\n          phrase: h,\n        })),\n        ...pass.suffixPhrases.map((p, h) => ({\n          type: \"compress\" as const,\n          pass: i,\n          phrase: h + pass.prefixPhrases.length,\n        })),\n        ...(i === lastPass ? [] : [{ type: \"mapping\" as const, pass: i }]),\n      ]),\n      ...reverse([...result.passes]).flatMap((pass, i) =>\n        pass.suffixPhrasesCompressed.map((p, h) => ({\n          type: \"back-mapping\" as const,\n          pass: result.passes.length - i - 1,\n          suffixPhrase: h,\n        }))\n      ),\n    ];\n    return {\n      type: \"relz-rec\",\n      input,\n      prefixLength: settings.prefixSize,\n      passes: result.passes,\n      phrases: result.phrases,\n      steps,\n    };\n  }\n}\n","const TARGET_COLOR = \"#E1BE6A\";\nconst SOURCE_COLOR = \"#40B0A6\";\n\nexport function SharedDefinitions() {\n  return (\n    <defs>\n      <marker\n        id=\"arrowhead\"\n        markerWidth=\"100\"\n        markerHeight=\"7\"\n        refX=\"9\"\n        refY=\"3.5\"\n        orient=\"auto\"\n      >\n        <polygon points=\"0 0, 10 3.5, 0 7\" />\n      </marker>\n\n      <linearGradient id=\"split-color\" gradientTransform=\"rotate(45)\">\n        <stop offset=\"75%\" stopColor={TARGET_COLOR} />\n        <stop offset=\"75%\" stopColor={SOURCE_COLOR} />\n      </linearGradient>\n    </defs>\n  );\n}\n\nexport interface ArrowProps {\n  x1: number;\n  x2: number;\n  y: number;\n}\n\nexport function Arrow(props: ArrowProps) {\n  const { x1, x2, y } = props;\n  const l = x2 - x1;\n  return (\n    <path\n      d={`M ${x1} ${y} v -20 h ${l} v 19`}\n      marker-end=\"url(#arrowhead)\"\n      stroke=\"black\"\n      fill=\"none\"\n    />\n  );\n}\n\nexport interface ArrowProps2 {\n  x1: number;\n  y1: number;\n  x2: number;\n  y2: number;\n  straight?: boolean;\n}\n\nexport function Arrow2(props: ArrowProps2) {\n  const { x1, y1, x2, y2, straight } = props;\n\n  if (straight) {\n    const v1 = y1 < y2 ? 10 : -10;\n    const v2 = y1 < y2 ? 20 : -20;\n\n    return (\n      <path\n        d={`M ${x1} ${y1} v ${v1} L ${x2} ${y2 - 20} v ${v2}`}\n        markerEnd=\"url(#arrowhead)\"\n        stroke=\"black\"\n        fill=\"none\"\n      />\n    );\n  } else {\n    const l = x2 - x1;\n    const h = (y2 - y1) / 2;\n\n    const v1 = y2 < y1 ? h : -h;\n    const v2 = y2 < y1 ? h : -h;\n    return (\n      <path\n        d={`m ${x1} ${y1} v ${v1} h ${l} v ${v2}`}\n        marker-end=\"url(#arrowhead)\"\n        stroke=\"black\"\n        fill=\"none\"\n      />\n    );\n  }\n}\n\nexport type CharacterColor = \"none\" | \"source\" | \"target\" | \"source-target\";\n\nexport interface CharacterProps {\n  x: number;\n  y: number;\n  w?: number;\n  h?: number;\n  text: string;\n  color?: CharacterColor;\n  onMouseEnter?: () => void;\n  onMouseLeave?: () => void;\n}\n\nexport function Character(props: CharacterProps) {\n  const { x, y, text, color } = props;\n  const w = props.w || 30;\n  const h = props.h || 30;\n  const fill =\n    color === \"source\"\n      ? SOURCE_COLOR\n      : color === \"target\"\n      ? TARGET_COLOR\n      : color === \"source-target\"\n      ? \"url(#split-color)\"\n      : \"none\";\n  return (\n    <>\n      <rect\n        x={x}\n        y={y}\n        width={w}\n        height={h}\n        fill={fill}\n        stroke=\"black\"\n      />\n      <foreignObject\n        x={x}\n        y={y}\n        width={w}\n        height={h}\n        onMouseEnter={props.onMouseEnter}\n        onMouseLeave={props.onMouseLeave}\n      >\n        <div\n          style={{\n            //   width: \"30px\",\n            //   height: \"30px\",\n            overflowY: \"auto\",\n            textAlign: \"center\",\n            verticalAlign: \"middle\",\n            lineHeight: `${h}px`,\n            userSelect: \"none\",\n          }}\n        >\n          {text}\n        </div>\n      </foreignObject>\n    </>\n  );\n}\n\nexport interface CurlyBraceProps {\n  x1: number;\n  y1: number;\n  x2: number;\n  y2: number;\n  w: number;\n  q: number;\n}\n\nexport function CurlyBrace(props: CurlyBraceProps) {\n  const { x1, y1, x2, y2, w, q } = props;\n  var dx = x1 - x2;\n  var dy = y1 - y2;\n  var len = Math.sqrt(dx * dx + dy * dy);\n  dx = dx / len;\n  dy = dy / len;\n\n  //Calculate Control Points of path,\n  const qx1 = x1 + q * w * dy;\n  const qy1 = y1 - q * w * dx;\n  const qx2 = x1 - 0.25 * len * dx + (1 - q) * w * dy;\n  const qy2 = y1 - 0.25 * len * dy - (1 - q) * w * dx;\n  const tx1 = x1 - 0.5 * len * dx + w * dy;\n  const ty1 = y1 - 0.5 * len * dy - w * dx;\n  const qx3 = x2 + q * w * dy;\n  const qy3 = y2 - q * w * dx;\n  const qx4 = x1 - 0.75 * len * dx + (1 - q) * w * dy;\n  const qy4 = y1 - 0.75 * len * dy - (1 - q) * w * dx;\n\n  const path = `M ${x1} ${y1} Q ${qx1} ${qy1} ${qx2} ${qy2} T ${tx1} ${ty1} M ${x2} ${y2} Q ${qx3} ${qy3} ${qx4} ${qy4} T ${tx1} ${ty1}`;\n\n  return <path d={path} stroke=\"black\" fill=\"none\"></path>;\n}\n\nexport interface PhraseDisplayProps {\n  x: number;\n  y: number;\n  l: number;\n  text: string;\n  w?: number;\n}\n\nexport function PhraseDisplay(props: PhraseDisplayProps) {\n  const { x, y, l, text } = props;\n  if (l === 1) {\n    return (\n      <foreignObject x={x - 20} y={y} width=\"60\" height=\"40\">\n        <div\n          style={{\n            //   width: \"30px\",\n            //   height: \"30px\",\n            overflowY: \"auto\",\n            textAlign: \"center\",\n            verticalAlign: \"middle\",\n            lineHeight: \"40px\",\n            userSelect: \"none\",\n            transform: \"rotate(-45deg)\",\n          }}\n        >\n          {text}\n        </div>\n      </foreignObject>\n    );\n  } else {\n    const x1 = x + 3;\n    const x2 = x + l * 30 - 3;\n    const w = props.w ?? 50;\n    return (\n      <>\n        <CurlyBrace x1={x1} x2={x2} y1={y} y2={y} w={10} q={0.6}></CurlyBrace>\n        <foreignObject\n          x={x1 + Math.abs(x2 - x1) / 2 - w / 2}\n          y={y}\n          width={w}\n          height=\"40\"\n        >\n          <div\n            style={{\n              //   width: \"30px\",\n              //   height: \"30px\",\n              overflowY: \"auto\",\n              textAlign: \"center\",\n              verticalAlign: \"middle\",\n              lineHeight: \"40px\",\n              userSelect: \"none\",\n            }}\n          >\n            {text}\n          </div>\n        </foreignObject>\n      </>\n    );\n  }\n}\n\nexport interface ShortPhraseProps {\n  x: number;\n  y: number;\n  text: string;\n}\n\nexport function ShortPhrase(props: ShortPhraseProps) {\n  const { x, y, text } = props;\n  return (\n    <foreignObject x={x} y={y} width=\"60\" height=\"40\">\n      <div\n        style={{\n          //   width: \"30px\",\n          //   height: \"30px\",\n          overflowY: \"auto\",\n          textAlign: \"center\",\n          verticalAlign: \"middle\",\n          lineHeight: \"40px\",\n          userSelect: \"none\",\n          transform: \"rotate(-45deg)\",\n        }}\n      >\n        {text}\n      </div>\n    </foreignObject>\n  );\n}\n\nexport interface CopyingPhraseProps {\n  x1: number;\n  x2: number;\n  y: number;\n  p: number;\n  l: number;\n  w?: number;\n}\n\nexport function CopyingPhrase(props: CopyingPhraseProps) {\n  const { x1, x2, y, p, l } = props;\n  const w = props.w ?? 50;\n\n  return (\n    <>\n      <CurlyBrace x1={x1} x2={x2} y1={y} y2={y} w={10} q={0.6}></CurlyBrace>\n      <foreignObject\n        x={x1 + Math.abs(x2 - x1) / 2 - w / 2}\n        y={y}\n        width={w}\n        height=\"40\"\n      >\n        <div\n          style={{\n            //   width: \"30px\",\n            //   height: \"30px\",\n            overflowY: \"auto\",\n            textAlign: \"center\",\n            verticalAlign: \"middle\",\n            lineHeight: \"40px\",\n            userSelect: \"none\",\n          }}\n        >\n          {`(${p}, ${l})`}\n        </div>\n      </foreignObject>\n    </>\n  );\n}\n","import React, { useState } from \"react\";\nimport { VisualizationData } from \"./common\";\nimport {\n  Arrow,\n  ArrowProps,\n  Character,\n  CharacterProps,\n  PhraseDisplay,\n  PhraseDisplayProps,\n  SharedDefinitions,\n} from \"./drawing\";\n\nexport interface PhrasesVisualizationProps {\n  data: VisualizationData;\n}\n\nexport function PhrasesVisualization(props: PhrasesVisualizationProps) {\n  const { data } = props;\n  const [highlightedPhraseIdx, setHighlightedPhraseIdx] = useState<number>();\n  const highlightedPhrase =\n    highlightedPhraseIdx !== undefined\n      ? data.phrases[highlightedPhraseIdx]\n      : undefined;\n\n  const characters: CharacterProps[] = data.input.split(\"\").map((c, i) => ({\n    text: c,\n    x: i * 30 + 30,\n    y: 30,\n  }));\n  const phrases: PhraseDisplayProps[] = [];\n  let referenceArrow: ArrowProps | undefined = undefined;\n\n  if (data.type === \"rlz\") {\n    data.phrases.forEach((p, i) => {\n      const pos = p.pos;\n      if (p.type === \"literal\") {\n        const text = `(${String.fromCodePoint(p.symbol)},0)`;\n        phrases.push({\n          x: pos * 30 + 30,\n          y: 65,\n          l: 1,\n          text,\n        });\n      } else {\n        const text = `(${p.p},${p.l})`;\n        phrases.push({\n          x: pos * 30 + 30,\n          y: 65,\n          l: p.l,\n          text,\n        });\n      }\n      for (let h = 0; h < p.l; h++) {\n        characters[p.pos + h].onMouseEnter = () => setHighlightedPhraseIdx(i);\n        characters[p.pos + h].onMouseLeave = () =>\n          setHighlightedPhraseIdx(undefined);\n      }\n    });\n  } else {\n    data.phrases.forEach((p, i) => {\n      const pos = p.pos;\n      if (p.type === \"literal\") {\n        const text = `(${String.fromCodePoint(p.symbol)},0)`;\n        phrases.push({\n          x: pos * 30 + 30,\n          y: 65,\n          l: 1,\n          text,\n        });\n      } else {\n        const text = `(${p.p},${p.l})`;\n        phrases.push({\n          x: pos * 30 + 30,\n          y: 65,\n          l: p.l,\n          text,\n        });\n      }\n      for (let h = 0; h < p.l; h++) {\n        characters[p.pos + h].onMouseEnter = () => setHighlightedPhraseIdx(i);\n        characters[p.pos + h].onMouseLeave = () =>\n          setHighlightedPhraseIdx(undefined);\n      }\n    });\n  }\n\n  if (highlightedPhrase) {\n    for (let i = 0; i < highlightedPhrase.l; i++) {\n      characters[highlightedPhrase.pos + i].color = \"target\";\n      if (data.type !== \"rlz\" && highlightedPhrase.type === \"copy\") {\n        if (characters[highlightedPhrase.p + i].color === \"target\") {\n          characters[highlightedPhrase.p + i].color = \"source-target\";\n        } else {\n          characters[highlightedPhrase.p + i].color = \"source\";\n        }\n      }\n    }\n\n    if (data.type !== \"rlz\" && highlightedPhrase.type === \"copy\") {\n      referenceArrow = {\n        x1: highlightedPhrase.pos * 30 + 45,\n        x2: highlightedPhrase.p * 30 + 45,\n        y: 30,\n      };\n    }\n  }\n\n  const width = data.input.length * 30 + 60;\n  const height = 120;\n\n  return (\n    <svg width={width} height={height}>\n      <SharedDefinitions />\n\n      {characters.map((props, i) => (\n        <Character key={i} {...props} />\n      ))}\n\n      {phrases.map((props, i) => (\n        <PhraseDisplay key={i} {...props} />\n      ))}\n\n      {referenceArrow && <Arrow {...referenceArrow} />}\n    </svg>\n  );\n}\n","import React from \"react\";\nimport Card from \"react-bootstrap/esm/Card\";\nimport Col from \"react-bootstrap/esm/Col\";\nimport Row from \"react-bootstrap/esm/Row\";\nimport {\n  Phrase,\n  RlzPhrase,\n  compressLz77,\n  compressWithSlidingWindow,\n  compressRlz,\n  compressRlzPrefix,\n  compressRelz,\n  compressRelzRecursive,\n} from \"../compression/algorithms\";\nimport { CompressorType } from \"../compression/compressors\";\nimport { stringToCodePoints } from \"../compression/utils\";\nimport { computeData, Settings } from \"../visualization/common\";\nimport { PhrasesVisualization } from \"../visualization/PhrasesVisualization\";\n\ninterface CompressorOutputProps {\n  input: string;\n  type: CompressorType;\n  settings: Settings;\n}\n\nexport function CompressorOutput(props: CompressorOutputProps): JSX.Element {\n  const { type, settings, input } = props;\n  const data = computeData(type, input, settings);\n\n  return (\n    <Card style={{ height: \"100%\" }}>\n      <Card.Body>\n        <Row className=\"overflow-auto\">\n          <Col>\n            <PhrasesVisualization data={data} />\n          </Col>\n        </Row>\n        <Row>\n          <Col>\n            z = {data.phrases.length}\n            {type === \"rlz\" ? ` (+ ${settings.reference.length})` : \"\"}\n          </Col>\n          <Col>l/z = {(input.length / data.phrases.length).toFixed(2)}</Col>\n        </Row>\n      </Card.Body>\n    </Card>\n  );\n}\n","import React, { useState } from \"react\";\n\nimport Button from \"react-bootstrap/Button\";\nimport Card from \"react-bootstrap/Card\";\nimport Container from \"react-bootstrap/Container\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Dropdown from \"react-bootstrap/Dropdown\";\nimport ButtonGroup from \"react-bootstrap/ButtonGroup\";\nimport {\n  availableCompressors,\n  CompressorSettings,\n  CompressorType,\n  initialCompressorSettings,\n} from \"../compression/compressors\";\nimport { CompressorSettingEditor } from \"../components/CompressorSettingsEditor\";\nimport { CompressorOutput } from \"../components/CompressorOutput\";\nimport FormControl from \"react-bootstrap/esm/FormControl\";\nimport { entries, keys } from \"lodash\";\nimport { Settings } from \"../visualization/common\";\n\nexport function Compare() {\n  const [input, setInput] = useState(\"AAABBBCCCC\");\n  const [compressorType, setCompressorType] = useState<CompressorType>(\"lz77\");\n\n  const [compressorSettings, setCompressorSettings] = useState<\n    [CompressorType, Settings][]\n  >(\n    keys(availableCompressors).map((type) => [\n      type as CompressorType,\n      { windowSize: 5, reference: \"\", prefixSize: 5, recursionLimit: 5 },\n    ])\n  );\n\n  function addCompressor() {\n    setCompressorSettings([\n      ...compressorSettings,\n      [\n        compressorType,\n        { windowSize: 5, reference: \"\", prefixSize: 5, recursionLimit: 5 },\n      ],\n    ]);\n  }\n\n  return (\n    <Container className=\"my-5\">\n      <Row>\n        <Col>\n          <Card>\n            <Card.Header>Input</Card.Header>\n            <Card.Body>\n              <FormControl\n                type=\"text\"\n                placeholder=\"Input Text\"\n                value={input}\n                onChange={(e) => setInput(e.target.value)}\n              ></FormControl>\n            </Card.Body>\n          </Card>\n        </Col>\n      </Row>\n      <Row className=\"mt-5\">\n        <Col lg=\"4\">\n          <h2>Compressors</h2>\n        </Col>\n        <Col lg=\"8\" className=\"d-none d-lg-block\">\n          <h2>Outputs</h2>\n        </Col>\n      </Row>\n      <Row>\n        <Col xs=\"12\" md=\"4\" lg=\"3\">\n          <Dropdown as={ButtonGroup} className=\"w-100\">\n            <Button onClick={addCompressor} className=\"w-75\">\n              {\"Add \" + availableCompressors[compressorType].title}\n            </Button>\n\n            <Dropdown.Toggle split />\n\n            <Dropdown.Menu>\n              {entries(availableCompressors).map(([type, { title }]) => (\n                <Dropdown.Item\n                  key={type}\n                  onClick={() => setCompressorType(type as CompressorType)}\n                >\n                  {title}\n                </Dropdown.Item>\n              ))}\n            </Dropdown.Menu>\n          </Dropdown>\n        </Col>\n      </Row>\n\n      {compressorSettings.map(([type, settings], idx) => (\n        <Row key={idx} className=\"mt-4\">\n          <Col xs=\"12\" lg=\"4\">\n            <CompressorSettingEditor\n              type={type}\n              settings={settings}\n              onChange={(newSettings) =>\n                setCompressorSettings(\n                  compressorSettings.map(([type, settings], i) =>\n                    idx === i ? [type, newSettings] : [type, settings]\n                  )\n                )\n              }\n              remove={() =>\n                setCompressorSettings(\n                  compressorSettings.filter((v, i) => i !== idx)\n                )\n              }\n            ></CompressorSettingEditor>\n          </Col>\n          <Col xs=\"12\" lg=\"8\" className=\"mt-1 mt-lg-0\">\n            <CompressorOutput\n              type={type}\n              settings={settings}\n              input={input}\n            ></CompressorOutput>\n          </Col>\n        </Row>\n      ))}\n      {compressorSettings.length === 0 && (\n        <Row className=\"justify-content-center mt-5\">\n          <Col xs=\"auto\">\n            <h4>No compressors added yet...</h4>\n          </Col>\n        </Row>\n      )}\n    </Container>\n  );\n}\n","import { take } from \"lodash\";\nimport React from \"react\";\nimport { LzLikeVisualizationData } from \"./common\";\nimport {\n  Arrow,\n  ArrowProps,\n  Character,\n  CharacterProps,\n  PhraseDisplay,\n  PhraseDisplayProps,\n  SharedDefinitions,\n} from \"./drawing\";\n\nexport interface LzLikeVisualizationProps {\n  data: LzLikeVisualizationData;\n  step: number;\n}\n\nexport function LzLikeVisualization(props: LzLikeVisualizationProps) {\n  const { data, step } = props;\n  const currentStep = data.steps[Math.min(step, data.steps.length - 1)];\n\n  const characters: CharacterProps[] = data.input.split(\"\").map((c, i) => ({\n    text: c,\n    x: i * 30 + 30,\n    y: 30,\n  }));\n  const phrases: PhraseDisplayProps[] = [];\n  let referenceArrow: ArrowProps | undefined = undefined;\n\n  const phraseCount =\n    currentStep.type === \"compress\"\n      ? currentStep.phrase + 1\n      : currentStep.type === \"result\"\n      ? data.phrases.length\n      : 0;\n  take(data.phrases, phraseCount).forEach((p) => {\n    const pos = p.pos;\n    if (p.type === \"literal\") {\n      const text = `(${String.fromCodePoint(p.symbol)},0)`;\n      phrases.push({\n        x: pos * 30 + 30,\n        y: 65,\n        l: 1,\n        text,\n      });\n    } else {\n      const text = `(${p.p},${p.l})`;\n      phrases.push({\n        x: pos * 30 + 30,\n        y: 65,\n        l: p.l,\n        text,\n      });\n    }\n  });\n\n  if (currentStep.type === \"compress\") {\n    const phrase = data.phrases[currentStep.phrase];\n    if (phrase.type === \"copy\") {\n      referenceArrow = {\n        x1: phrase.pos * 30 + 45,\n        x2: phrase.p * 30 + 45,\n        y: 30,\n      };\n    }\n    for (let i = 0; i < phrase.l; i++) {\n      characters[phrase.pos + i].color = \"target\";\n      if (phrase.type === \"copy\") {\n        if (characters[phrase.p + i].color === \"target\") {\n          characters[phrase.p + i].color = \"source-target\";\n        } else {\n          characters[phrase.p + i].color = \"source\";\n        }\n      }\n    }\n  }\n\n  // const colors: CharacterColor[] = new Array(input.length).fill(\"none\");\n  // let arrowStart: number | undefined;\n  // let arrowTarget: number | undefined;\n  // if (currentPhrase !== undefined && currentPhrase < phrases.length) {\n  //   const phrase = phrases[currentPhrase];\n  //   if (phrase.type === \"copy\") {\n  //     for (let i = 0; i < phrase.l; i++) {\n  //       colors[phrase.p + i] = \"source\";\n  //     }\n  //     arrowTarget = phrase.p;\n  //   }\n  //   const phrasePos = sum(take(phrases, currentPhrase).map((p) => p.l));\n  //   arrowStart = phrasePos;\n  //   for (let i = 0; i < phrase.l; i++) {\n  //     colors[phrasePos + i] =\n  //       colors[phrasePos + i] === \"none\" ? \"target\" : \"source-target\";\n  //   }\n  // }\n\n  // const shortPhrases: ShortPhraseProps[] = [];\n  // const copyingPhrases: CopyingPhraseProps[] = [];\n  // if (currentPhrase !== undefined) {\n  //   let currentPos = 0;\n  //   take(phrases, currentPhrase + 1).forEach((p) => {\n  //     if (p.type === \"literal\") {\n  //       shortPhrases.push({\n  //         x: currentPos * 30,\n  //         y: 90,\n  //         text: `(${String.fromCodePoint(p.symbol)},0)`,\n  //       });\n  //     } else if (p.l === 1) {\n  //       shortPhrases.push({\n  //         x: currentPos * 30,\n  //         y: 90,\n  //         text: `(${p.p},${p.l})`,\n  //       });\n  //     } else {\n  //       copyingPhrases.push({\n  //         x1: currentPos * 30 + 22,\n  //         x2: currentPos * 30 + p.l * 30 + 18,\n  //         y: 90,\n  //         ...p,\n  //       });\n  //     }\n  //     currentPos += p.l;\n  //   });\n  // }\n\n  return (\n    <svg height=\"160\" width={data.input.length * 30 + 40}>\n      <SharedDefinitions></SharedDefinitions>\n\n      {characters.map((props, i) => (\n        <Character key={i} {...props} />\n      ))}\n\n      {phrases.map((props, i) => (\n        <PhraseDisplay key={i} {...props} />\n      ))}\n\n      {referenceArrow && <Arrow {...referenceArrow} />}\n\n      {/* {arrowStart !== undefined && arrowTarget !== undefined && (\n        <Arrow\n          x1={arrowStart * 30 + 35}\n          x2={arrowTarget * 30 + 35}\n          y={50}\n        ></Arrow>\n      )}\n\n      {shortPhrases.map((props, i) => (\n        <ShortPhrase key={i} {...props}></ShortPhrase>\n      ))}\n\n      {copyingPhrases.map((props, i) => (\n        <CopyingPhrase key={i} {...props}></CopyingPhrase>\n      ))} */}\n    </svg>\n  );\n}\n","import { take } from \"lodash\";\nimport React from \"react\";\nimport { RlzVisualizationData } from \"./common\";\nimport {\n  Character,\n  SharedDefinitions,\n  Arrow2,\n  PhraseDisplayProps,\n  CharacterProps,\n  ArrowProps2,\n  PhraseDisplay,\n} from \"./drawing\";\n\nexport interface RlzVisualizationProps {\n  data: RlzVisualizationData;\n  step: number;\n}\n\nexport function RlzVisualization(props: RlzVisualizationProps) {\n  const { data, step } = props;\n  const currentStep = data.steps[Math.min(step, data.steps.length - 1)];\n\n  const refCharacters: CharacterProps[] = data.reference\n    .split(\"\")\n    .map((c, i) => ({\n      text: c,\n      x: i * 30 + 30,\n      y: 10,\n    }));\n  const characters: CharacterProps[] = data.input.split(\"\").map((c, i) => ({\n    text: c,\n    x: i * 30 + 30,\n    y: 90,\n  }));\n  const phrases: PhraseDisplayProps[] = [];\n  let referenceArrow: ArrowProps2 | undefined = undefined;\n\n  const phraseCount =\n    currentStep.type === \"compress\"\n      ? currentStep.phrase + 1\n      : currentStep.type === \"result\"\n      ? data.phrases.length\n      : 0;\n  take(data.phrases, phraseCount).forEach((p) => {\n    const pos = p.pos;\n    if (p.type === \"literal\") {\n      const text = `(${String.fromCodePoint(p.symbol)},0)`;\n      phrases.push({\n        x: pos * 30 + 30,\n        y: 125,\n        l: 1,\n        text,\n      });\n    } else {\n      const text = `(${p.p},${p.l})`;\n      phrases.push({\n        x: pos * 30 + 30,\n        y: 125,\n        l: p.l,\n        text,\n      });\n    }\n  });\n\n  if (currentStep.type === \"compress\") {\n    const phrase = data.phrases[currentStep.phrase];\n    if (phrase.type === \"copy\") {\n      referenceArrow = {\n        x1: phrase.pos * 30 + 45,\n        y1: 90,\n        x2: phrase.p * 30 + 45,\n        y2: 41,\n      };\n    }\n    for (let i = 0; i < phrase.l; i++) {\n      characters[phrase.pos + i].color = \"target\";\n      if (phrase.type === \"copy\") {\n        refCharacters[phrase.p + i].color = \"source\";\n      }\n    }\n  }\n\n  return (\n    <svg height=\"200\" width=\"100%\">\n      <SharedDefinitions></SharedDefinitions>\n\n      {refCharacters.map((props, i) => (\n        <Character key={i} {...props} />\n      ))}\n\n      {characters.map((props, i) => (\n        <Character key={i} {...props} />\n      ))}\n\n      {referenceArrow && <Arrow2 {...referenceArrow} />}\n\n      {phrases.map((props, i) => (\n        <PhraseDisplay key={i} {...props} />\n      ))}\n    </svg>\n  );\n}\n","import { sum, take, zip } from \"lodash\";\nimport React from \"react\";\nimport { RelzVisualizationData } from \"./common\";\nimport {\n  CharacterColor,\n  ShortPhraseProps,\n  CopyingPhraseProps,\n  Arrow,\n  Character,\n  CopyingPhrase,\n  SharedDefinitions,\n  ShortPhrase,\n  Arrow2,\n} from \"./drawing\";\n\nexport interface RelzVisualizationProps {\n  data: RelzVisualizationData;\n  step: number;\n}\n\nexport function RelzVisualization(props: RelzVisualizationProps) {\n  const { data, step: currentPhrase } = props;\n  const { input, phrases, firstPassPhrases, metaSymbolPhrases } = data;\n\n  // const colors: CharacterColor[] = new Array(input.length).fill(\"none\");\n  // let arrowStart: number | undefined;\n  // let arrowTarget: number | undefined;\n  // if (currentPhrase !== undefined && currentPhrase < firstPassPhrases.length) {\n  //   const phrase = firstPassPhrases[currentPhrase];\n  //   if (phrase.type === \"copy\") {\n  //     for (let i = 0; i < phrase.l; i++) {\n  //       colors[phrase.p + i] = \"source\";\n  //     }\n  //     arrowTarget = phrase.p;\n  //   }\n  //   const phrasePos = sum(\n  //     take(firstPassPhrases, currentPhrase).map((p) => p.l)\n  //   );\n  //   arrowStart = phrasePos;\n  //   for (let i = 0; i < phrase.l; i++) {\n  //     colors[phrasePos + i] =\n  //       colors[phrasePos + i] === \"none\" ? \"target\" : \"source-target\";\n  //   }\n  // }\n\n  // const shortPhrases: ShortPhraseProps[] = [];\n  // const copyingPhrases: CopyingPhraseProps[] = [];\n  // if (currentPhrase !== undefined) {\n  //   let currentPos = 0;\n  //   take(firstPassPhrases, currentPhrase + 1).forEach((p) => {\n  //     if (p.type === \"literal\") {\n  //       shortPhrases.push({\n  //         x: currentPos * 30,\n  //         y: 90,\n  //         text: `(${String.fromCodePoint(p.symbol)},0)`,\n  //       });\n  //     } else if (p.l === 1) {\n  //       shortPhrases.push({\n  //         x: currentPos * 30,\n  //         y: 90,\n  //         text: `(${p.p},${p.l})`,\n  //       });\n  //     } else {\n  //       copyingPhrases.push({\n  //         x1: currentPos * 30 + 22,\n  //         x2: currentPos * 30 + p.l * 30 + 18,\n  //         y: 90,\n  //         ...p,\n  //       });\n  //     }\n  //     currentPos += p.l;\n  //   });\n  // }\n\n  // const mappingArrows: [number, number][] = [];\n  // if (currentPhrase === firstPassPhrases.length) {\n  //   let currentPos = 0;\n  //   firstPassPhrases.forEach((p, i) => {\n  //     mappingArrows.push([currentPos * 30 + 35 + (p.l - 1) * 15, i * 30 + 35]);\n  //     currentPos += p.l;\n  //   });\n  // }\n\n  // // TODO: convert meta symbols to lower case characters?\n  // const metaSymbols =\n  //   currentPhrase && currentPhrase >= firstPassPhrases.length\n  //     ? data.metaSymbols.map((s) => String(s))\n  //     : [];\n  // const metaColors: CharacterColor[] = new Array(metaSymbols.length).fill(\n  //   \"none\"\n  // );\n  // let metaArrowStart: number | undefined;\n  // let metaArrowTarget: number | undefined;\n  // const currentMetaPhrase =\n  //   currentPhrase !== undefined && currentPhrase > firstPassPhrases.length\n  //     ? Math.min(\n  //         currentPhrase - firstPassPhrases.length - 1,\n  //         metaSymbolPhrases.length - 1\n  //       )\n  //     : undefined;\n  // if (\n  //   currentPhrase !== undefined &&\n  //   currentMetaPhrase !== undefined &&\n  //   currentPhrase < firstPassPhrases.length + metaSymbolPhrases.length + 1\n  // ) {\n  //   const phrase = metaSymbolPhrases[currentMetaPhrase];\n  //   if (phrase.type === \"copy\") {\n  //     for (let i = 0; i < phrase.l; i++) {\n  //       metaColors[phrase.p + i] = \"source\";\n  //     }\n  //     metaArrowTarget = phrase.p;\n  //   }\n  //   const phrasePos = sum(\n  //     take(metaSymbolPhrases, currentMetaPhrase).map((p) => p.l)\n  //   );\n  //   metaArrowStart = phrasePos;\n  //   for (let i = 0; i < phrase.l; i++) {\n  //     metaColors[phrasePos + i] =\n  //       metaColors[phrasePos + i] === \"none\" ? \"target\" : \"source-target\";\n  //   }\n  // }\n\n  // if (currentMetaPhrase !== undefined) {\n  //   let currentPos = 0;\n  //   take(metaSymbolPhrases, currentMetaPhrase + 1).forEach((p, i) => {\n  //     if (p.type === \"literal\") {\n  //       shortPhrases.push({\n  //         x: currentPos * 30,\n  //         y: 300,\n  //         text: `(${metaSymbols[i]},0)`,\n  //       });\n  //     } else if (p.l === 1) {\n  //       shortPhrases.push({\n  //         x: currentPos * 30,\n  //         y: 300,\n  //         text: `(${p.p},${p.l})`,\n  //       });\n  //     } else {\n  //       copyingPhrases.push({\n  //         x1: currentPos * 30 + 22,\n  //         x2: currentPos * 30 + p.l * 30 + 18,\n  //         y: 300,\n  //         ...p,\n  //       });\n  //     }\n  //     currentPos += p.l;\n  //   });\n  // }\n\n  // const backMappingArrows: [number, number][] = [];\n  // if (currentPhrase !== undefined && currentPhrase === data.stepsCount) {\n  //   let currentPos = 0;\n  //   let currentMetaPos = 0;\n  //   zip(phrases, metaSymbolPhrases).forEach(([p, metaP], i) => {\n  //     if (p && metaP) {\n  //       if (p.type === \"literal\") {\n  //         shortPhrases.push({\n  //           x: currentPos * 30,\n  //           y: 145,\n  //           text: `(${String.fromCodePoint(p.symbol)},0)`,\n  //         });\n  //       } else if (p.l === 1) {\n  //         shortPhrases.push({\n  //           x: currentPos * 30,\n  //           y: 145,\n  //           text: `(${p.p},${p.l})`,\n  //         });\n  //       } else {\n  //         copyingPhrases.push({\n  //           x1: currentPos * 30 + 22,\n  //           x2: currentPos * 30 + p.l * 30 + 18,\n  //           y: 145,\n  //           ...p,\n  //         });\n  //       }\n\n  //       backMappingArrows.push([\n  //         currentMetaPos * 30 + 35 + (metaP.l - 1) * 15,\n  //         currentPos * 30 + 35 + +(p.l - 1) * 15,\n  //       ]);\n\n  //       currentPos += p.l;\n  //       currentMetaPos += metaP?.l;\n  //     }\n  //   });\n  // }\n\n  return (\n    <svg height=\"500\" width=\"100%\">\n      <SharedDefinitions></SharedDefinitions>\n\n      {/* {input.split(\"\").map((char, i) => (\n        <Character\n          key={i}\n          x={i * 30 + 20}\n          y={50}\n          text={char}\n          color={colors[i]}\n        ></Character>\n      ))}\n\n      {arrowStart !== undefined && arrowTarget !== undefined && (\n        <Arrow\n          x1={arrowStart * 30 + 35}\n          x2={arrowTarget * 30 + 35}\n          y={50}\n        ></Arrow>\n      )}\n\n      {shortPhrases.map((props, i) => (\n        <ShortPhrase key={i} {...props}></ShortPhrase>\n      ))}\n\n      {copyingPhrases.map((props, i) => (\n        <CopyingPhrase key={i} {...props}></CopyingPhrase>\n      ))}\n\n      {mappingArrows.map(([x1, x2], i) => (\n        <Arrow2 key={i} x1={x1} y1={130} x2={x2} y2={259} straight></Arrow2>\n      ))}\n\n      {metaSymbols.map((char, i) => (\n        <Character\n          key={i}\n          x={i * 30 + 20}\n          y={260}\n          text={char}\n          color={metaColors[i]}\n        ></Character>\n      ))}\n\n      {metaArrowStart !== undefined && metaArrowTarget !== undefined && (\n        <Arrow\n          x1={metaArrowStart * 30 + 35}\n          x2={metaArrowTarget * 30 + 35}\n          y={260}\n        ></Arrow>\n      )}\n\n      {finalStep && (\n        <line\n          x1=\"20\"\n          y1=\"132\"\n          x2={input.length * 30 + 20}\n          y2=\"132\"\n          stroke=\"black\"\n        />\n      )}\n      {finalStep && (\n        <line\n          x1=\"20\"\n          y1=\"135\"\n          x2={input.length * 30 + 20}\n          y2=\"135\"\n          stroke=\"black\"\n        />\n      )}\n\n      {backMappingArrows.map(([x1, x2]) => (\n        <Arrow2 x1={x1} y1={260} x2={x2} y2={220} straight></Arrow2>\n      ))} */}\n    </svg>\n  );\n}\n","import { drop, dropWhile, last, sum, take } from \"lodash\";\nimport React from \"react\";\nimport { RelzRecVisualizationData } from \"./common\";\nimport {\n  Arrow,\n  Arrow2,\n  ArrowProps,\n  ArrowProps2,\n  Character,\n  CharacterProps,\n  PhraseDisplay,\n  PhraseDisplayProps,\n  SharedDefinitions,\n} from \"./drawing\";\n\nexport interface RelzRecVisualizationProps {\n  data: RelzRecVisualizationData;\n  step: number;\n}\n\nexport function RelzRecVisualization(props: RelzRecVisualizationProps) {\n  const { data, step: currentPhrase } = props;\n  const { passes, prefixLength } = data;\n  const lineDistance = 120;\n  const step = data.steps[Math.min(currentPhrase, data.steps.length - 1)];\n  console.log(step);\n\n  const passOffsets = passes.reduce(\n    (lengths: number[], pass) => {\n      const length =\n        (last(lengths) ?? 0) + sum(pass.prefixPhrases.map((p) => p.l));\n      return [...lengths, length];\n    },\n    [0]\n  );\n\n  const [\n    passesVisible,\n    phrasesVisible,\n    mappingsVisible,\n    currentBackMappingPass,\n  ] =\n    step.type === \"initial\"\n      ? [1, 0, 0, 0]\n      : step.type === \"compress\"\n      ? [step.pass + 1, step.phrase + 1, step.pass - 1]\n      : step.type === \"mapping\"\n      ? [step.pass + 2, 0, step.pass + 1]\n      : [passes.length, prefixLength, 0, step.pass, step.suffixPhrase];\n  const characters: CharacterProps[][] = take(passes, passesVisible).map(\n    ({ input }, i) =>\n      input.map((c, h) => ({\n        x: h * 30 + passOffsets[i] * 30 + 30,\n        y: i * lineDistance + 30,\n        text: i === 0 ? String.fromCodePoint(c) : String(c),\n        color: \"none\",\n      }))\n  );\n\n  const phraseDisplays: PhraseDisplayProps[] = [];\n  const mappingArrows: ArrowProps2[] = [];\n  let referenceArrow: ArrowProps | undefined = undefined;\n\n  if (step.type === \"compress\") {\n    const allPhrases = [\n      ...passes[step.pass].prefixPhrases,\n      ...passes[step.pass].suffixPhrases,\n    ];\n    const phrase = allPhrases[step.phrase];\n    if (phrase.type === \"copy\") {\n      referenceArrow = {\n        x1: phrase.pos * 30 + passOffsets[step.pass] * 30 + 45,\n        x2: phrase.p * 30 + passOffsets[step.pass] * 30 + 45,\n        y: step.pass * lineDistance + 30,\n      };\n      for (let i = 0; i < phrase.l; i++) {\n        characters[step.pass][phrase.pos + i].color = \"target\";\n        if (characters[step.pass][phrase.p + i].color === \"target\") {\n          characters[step.pass][phrase.p + i].color = \"source-target\";\n        } else {\n          characters[step.pass][phrase.p + i].color = \"source\";\n        }\n      }\n    } else {\n      characters[step.pass][phrase.pos].color = \"target\";\n    }\n  }\n\n  if (step.type === \"back-mapping\") {\n    const phrase = passes[step.pass].suffixPhrasesCompressed[step.suffixPhrase];\n    drop(passes, currentBackMappingPass).forEach((pass, i) => {\n      const passIdx = i + step.pass;\n      take(\n        pass.suffixPhrasesCompressed,\n        passIdx === step.pass\n          ? step.suffixPhrase + 1\n          : passes[passIdx].suffixPhrasesCompressed.length\n      ).forEach((p, pi) => {\n        const pos = p.pos;\n        if (p.type === \"literal\") {\n          const text = `(${\n            passIdx === 0 ? String.fromCodePoint(p.symbol) : String(p.symbol)\n          },0)`;\n          phraseDisplays.push({\n            x: pos * 30 + passOffsets[passIdx] * 30 + 30,\n            y: 65 + lineDistance * passIdx,\n            l: 1,\n            text,\n          });\n        } else {\n          const text = `(${p.p},${p.l})`;\n          phraseDisplays.push({\n            x: pos * 30 + passOffsets[passIdx] * 30 + 30,\n            y: 65 + lineDistance * passIdx,\n            l: p.l,\n            text,\n          });\n        }\n\n        const metaPhrase = passes[passIdx + 1].phrasesCompressed[pi];\n        mappingArrows.push({\n          x1:\n            metaPhrase.pos * 30 +\n            30 +\n            metaPhrase.l * 15 +\n            passOffsets[passIdx + 1] * 30,\n          y1: 150 + passIdx * lineDistance,\n          x2: p.pos * 30 + 30 + p.l * 15 + passOffsets[passIdx] * 30,\n          y2: 140 + passIdx * lineDistance,\n          straight: true,\n        });\n      });\n      dropWhile(\n        pass.suffixPhrases,\n        (p) => passIdx !== step.pass || p.pos < phrase.pos + phrase.l\n      ).forEach((p) => {\n        const pos = p.pos;\n        if (p.type === \"literal\") {\n          const text = `(${\n            passIdx === 0 ? String.fromCodePoint(p.symbol) : String(p.symbol)\n          },0)`;\n          phraseDisplays.push({\n            x: pos * 30 + passOffsets[passIdx] * 30 + 30,\n            y: 65 + lineDistance * passIdx,\n            l: 1,\n            text,\n          });\n        } else {\n          const text = `(${p.p},${p.l})`;\n          phraseDisplays.push({\n            x: pos * 30 + passOffsets[passIdx] * 30 + 30,\n            y: 65 + lineDistance * passIdx,\n            l: p.l,\n            text,\n          });\n        }\n      });\n    });\n  }\n\n  take(passes, passesVisible).forEach((pass, i) => {\n    take(\n      pass.prefixPhrases,\n      i === passesVisible - 1 ? phrasesVisible : pass.prefixPhrases.length\n    ).forEach((p) => {\n      const { pos } = p;\n      if (p.type === \"literal\") {\n        const text = `(${\n          i === 0 ? String.fromCodePoint(p.symbol) : String(p.symbol)\n        },0)`;\n        phraseDisplays.push({\n          x: pos * 30 + passOffsets[i] * 30 + 30,\n          y: 65 + lineDistance * i,\n          l: 1,\n          text,\n        });\n      } else {\n        const text = `(${p.p},${p.l})`;\n        phraseDisplays.push({\n          x: pos * 30 + passOffsets[i] * 30 + 30,\n          y: 65 + lineDistance * i,\n          l: p.l,\n          text,\n        });\n      }\n    });\n    take(\n      pass.suffixPhrases,\n      i === passesVisible - 1\n        ? phrasesVisible - pass.prefixPhrases.length\n        : currentBackMappingPass !== undefined && i >= currentBackMappingPass\n        ? 0\n        : pass.suffixPhrases.length\n    ).forEach((p) => {\n      const pos = p.pos;\n      if (p.type === \"literal\") {\n        const text = `(${\n          i === 0 ? String.fromCodePoint(p.symbol) : String(p.symbol)\n        },0)`;\n        phraseDisplays.push({\n          x: pos * 30 + passOffsets[i] * 30 + 30,\n          y: 65 + lineDistance * i,\n          l: 1,\n          text,\n        });\n      } else {\n        const text = `(${p.p},${p.l})`;\n        phraseDisplays.push({\n          x: pos * 30 + passOffsets[i] * 30 + 30,\n          y: 65 + lineDistance * i,\n          l: p.l,\n          text,\n        });\n      }\n    });\n  });\n\n  take(passes, mappingsVisible).forEach((pass, i) =>\n    pass.suffixPhrases.forEach((p, pi) => {\n      mappingArrows.push({\n        x1: p.pos * 30 + 30 + p.l * 15 + passOffsets[i] * 30,\n        y1: 100 + i * lineDistance,\n        x2: pi * 30 + passOffsets[i + 1] * 30 + 45,\n        y2: 150 + i * lineDistance,\n        straight: true,\n      });\n    })\n  );\n\n  return (\n    <svg height={passes.length * lineDistance} width={data.input.length * 30 + 60}>\n      <SharedDefinitions></SharedDefinitions>\n\n      {characters.map((passCharacters, i) =>\n        passCharacters.map((props, h) => (\n          <Character key={`${i}+${h}`} {...props}></Character>\n        ))\n      )}\n\n      {phraseDisplays.map((props, i) => (\n        <PhraseDisplay key={i} {...props}></PhraseDisplay>\n      ))}\n\n      {mappingArrows.map((props, i) => (\n        <Arrow2 key={i} {...props}></Arrow2>\n      ))}\n\n      {referenceArrow && <Arrow {...referenceArrow}></Arrow>}\n    </svg>\n  );\n}\n","import React, { useState } from \"react\";\nimport Button from \"react-bootstrap/esm/Button\";\nimport Card from \"react-bootstrap/esm/Card\";\nimport Form from \"react-bootstrap/esm/Form\";\nimport FormControl from \"react-bootstrap/esm/FormControl\";\nimport InputGroup from \"react-bootstrap/esm/InputGroup\";\nimport {\n  availableCompressors,\n  CompressorType,\n} from \"../compression/compressors\";\nimport { Settings } from \"../visualization/common\";\n\ninterface EmbedUrlProps {\n  type: CompressorType;\n  input: string;\n  settings: Settings;\n  step: number;\n}\n\nexport function EmbedUrl(props: EmbedUrlProps) {\n  const { type, input, settings, step } = props;\n\n  const [includeStep, setIncludeStep] = useState(true);\n  const [embedVisualization, setEmbedVisualization] = useState(false);\n\n  const currentQuery = new URLSearchParams();\n  currentQuery.set(\"type\", type);\n  currentQuery.set(\"input\", input);\n  if (availableCompressors[type].needsPrefixSize) {\n    currentQuery.set(\"prefix\", String(settings.prefixSize));\n  }\n  if (availableCompressors[type].needsWindowSize) {\n    currentQuery.set(\"window\", String(settings.windowSize));\n  }\n  if (availableCompressors[type].needsRecursionLimit) {\n    currentQuery.set(\"recursion\", String(settings.recursionLimit));\n  }\n  if (availableCompressors[type].needsReference) {\n    currentQuery.set(\"reference\", settings.reference);\n  }\n  if (includeStep) {\n    currentQuery.set(\"step\", String(step));\n  }\n\n  const pathname = embedVisualization ? \"/embed\" : \"/steps\";\n  const url = `${window.location.origin}${\n    window.location.pathname\n  }/#${pathname}?${currentQuery.toString()}`;\n\n  return (\n    <Card>\n      <Card.Body>\n        <Form>\n          <InputGroup className=\"mb-3\">\n            <FormControl value={url} readOnly />\n            <InputGroup.Append>\n              <Button\n                variant=\"outline-secondary\"\n                onClick={() => navigator.clipboard.writeText(url)}\n              >\n                Copy\n              </Button>\n            </InputGroup.Append>\n          </InputGroup>\n          <Form.Check\n            custom\n            type=\"checkbox\"\n            label=\"Include current step\"\n            id=\"includeStep\"\n            onChange={(e) => setIncludeStep(e.target.checked)}\n            checked={includeStep}\n          />\n          <Form.Check\n            custom\n            type=\"checkbox\"\n            label=\"Embed visualization\"\n            id=\"embed\"\n            onChange={(e) => setEmbedVisualization(e.target.checked)}\n            checked={embedVisualization}\n          />\n        </Form>\n      </Card.Body>\n    </Card>\n  );\n}\n","import {\n  faFastBackward,\n  faBackward,\n  faForward,\n  faFastForward,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React from \"react\";\nimport Button from \"react-bootstrap/esm/Button\";\nimport Col from \"react-bootstrap/esm/Col\";\nimport Container from \"react-bootstrap/esm/Container\";\nimport Row from \"react-bootstrap/esm/Row\";\n\ninterface StepControlsProps {\n  step: number;\n  stepsTotal: number;\n  stepChanged?: (step: number) => void;\n}\n\nexport function StepControls(props: StepControlsProps) {\n  const { step, stepsTotal, stepChanged } = props;\n  function updateStep(newStep: number) {\n    if (stepChanged) {\n      stepChanged(Math.max(0, Math.min(stepsTotal - 1, newStep)));\n    }\n  }\n  return (\n    <Container fluid>\n      <Row className=\"no-gutters\">\n        <Col>\n          <Button\n            style={{ width: \"100%\" }}\n            disabled={step === 0}\n            onClick={() => updateStep(0)}\n          >\n            <FontAwesomeIcon icon={faFastBackward} /> First\n          </Button>\n        </Col>\n        <Col className=\"ml-2\">\n          <Button\n            style={{ width: \"100%\" }}\n            disabled={step === 0}\n            onClick={() => updateStep(step - 1)}\n          >\n            <FontAwesomeIcon icon={faBackward} /> Previous\n          </Button>\n        </Col>\n        <Col className=\"text-center my-auto\">\n          <h5>{`${step + 1} / ${stepsTotal}`}</h5>\n        </Col>\n        <Col className=\"ml-2\">\n          <Button\n            style={{ width: \"100%\" }}\n            disabled={step >= stepsTotal - 1}\n            onClick={() => updateStep(step + 1)}\n          >\n            Next <FontAwesomeIcon icon={faForward} />\n          </Button>\n        </Col>\n\n        <Col className=\"ml-2\">\n          <Button\n            style={{ width: \"100%\" }}\n            disabled={step >= stepsTotal - 1}\n            onClick={() => updateStep(stepsTotal - 1)}\n          >\n            Last <FontAwesomeIcon icon={faFastForward} />\n          </Button>\n        </Col>\n      </Row>\n    </Container>\n  );\n}\n","import { keys } from \"lodash\";\nimport { useEffect, useMemo, useRef } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport {\n  availableCompressors,\n  CompressorType,\n} from \"./compression/compressors\";\nimport { Settings } from \"./visualization/common\";\n\nexport function useQuery() {\n  const location = useLocation();\n\n  return useMemo(() => new URLSearchParams(location.search), [location.search]);\n}\n\nexport function useEmbedState(): boolean {\n  const location = useLocation();\n  const query = useQuery();\n  return query.has(\"embed\") || location.pathname === \"/embed\";\n}\n\nexport function useSettingsFromQuery(): {\n  type: CompressorType;\n  input: string;\n  step: number;\n  settings: Settings;\n} {\n  const query = useQuery();\n  const type = query.get(\"type\");\n  const input = query.get(\"input\") ?? \"AABCDDDCABBDBADDACB\";\n  const step = parseInt(query.get(\"step\") ?? \"0\");\n  const windowSize = query.get(\"window\");\n  const prefix = query.get(\"prefix\");\n  const recursion = query.get(\"recursion\");\n  const reference = query.get(\"reference\");\n  const settings: Settings = useMemo(\n    () => ({\n      windowSize: windowSize === null ? 5 : parseInt(windowSize),\n      prefixSize: prefix === null ? 5 : parseInt(prefix),\n      recursionLimit: recursion === null ? 5 : parseInt(recursion),\n      reference: reference === null ? \"\" : reference,\n    }),\n    [windowSize, prefix, recursion, reference]\n  );\n\n  return useMemo(\n    () =>\n      type !== null && keys(availableCompressors).includes(type)\n        ? { type: type as CompressorType, input, step, settings }\n        : { type: \"lz77\", input, step, settings },\n    [type, input, step, settings]\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Card from \"react-bootstrap/Card\";\nimport Form from \"react-bootstrap/Form\";\nimport {\n  availableCompressors,\n  CompressorType,\n} from \"../compression/compressors\";\nimport { values } from \"lodash\";\nimport { LzLikeVisualization } from \"../visualization/LzLikeVisualization\";\nimport { computeData } from \"../visualization/common\";\nimport { RlzVisualization } from \"../visualization/RlzVisualization\";\nimport { RelzVisualization } from \"../visualization/RelzVisualization\";\nimport { RelzRecVisualization } from \"../visualization/RelzRecVisualization\";\nimport { EmbedUrl } from \"../components/EmbedUrl\";\nimport Container from \"react-bootstrap/esm/Container\";\nimport { StepControls } from \"../components/StepControls\";\nimport { useSettingsFromQuery } from \"../hooks\";\n\nexport default function StepByStep() {\n  const [input, setInput] = useState(\"ABCCDBCCABDD\");\n  const [currentStep, setCurrentStep] = useState<number>(0);\n  const [selectedCompressor, setSelectedCompressor] = useState<CompressorType>(\n    \"lz77\"\n  );\n  const currentCompressor = availableCompressors[selectedCompressor];\n  const [referenceString, setReferenceString] = useState(\"\");\n  const [windowSize, setWindowSize] = useState(5);\n  const [prefixSize, setPrefixSize] = useState(5);\n  const [recursionLimit, setRecursionLimit] = useState(5);\n  const query = useSettingsFromQuery();\n  useEffect(() => {\n    console.log(query);\n    setSelectedCompressor(query.type);\n    setInput(query.input);\n    setReferenceString(query.settings.reference);\n    setWindowSize(query.settings.windowSize);\n    setPrefixSize(query.settings.prefixSize);\n    setRecursionLimit(query.settings.recursionLimit);\n    setCurrentStep(query.step);\n  }, [query]);\n\n  const data = computeData(selectedCompressor, input, {\n    reference: referenceString,\n    windowSize,\n    prefixSize,\n    recursionLimit,\n  });\n  useEffect(() => {\n    setCurrentStep(Math.min(data.steps.length - 1, currentStep));\n  }, [data, data.steps.length, currentStep]);\n\n  return (\n    <>\n      <Container>\n        <Row className=\"mt-5\">\n          <Col>\n            <Card>\n              <Card.Header>Settings</Card.Header>\n              <Card.Body>\n                <Form>\n                  <Form.Group>\n                    <Form.Label>Input String</Form.Label>\n                    <Form.Control\n                      value={input}\n                      onChange={(e) => setInput(e.target.value)}\n                    />\n                  </Form.Group>\n                  <Form.Row>\n                    <Col>\n                      <Form.Group>\n                        <Form.Label>Compression Algorithm</Form.Label>\n                        {values(availableCompressors).map((c) => (\n                          <Form.Check\n                            key={c.type}\n                            label={c.title}\n                            name=\"compressor-group\"\n                            type=\"radio\"\n                            checked={selectedCompressor === c.type}\n                            onChange={() => setSelectedCompressor(c.type)}\n                          />\n                        ))}\n                      </Form.Group>\n                    </Col>\n                    <Col>\n                      {currentCompressor.needsReference && (\n                        <Form.Group key=\"reference-string\">\n                          <Form.Label>Reference</Form.Label>\n                          <Form.Control\n                            placeholder=\"Reference String\"\n                            value={referenceString}\n                            onChange={(e) => setReferenceString(e.target.value)}\n                          />\n                        </Form.Group>\n                      )}\n                      {currentCompressor.needsPrefixSize && (\n                        <Form.Group>\n                          <Form.Label>Prefix Size</Form.Label>\n                          <Form.Control\n                            type=\"number\"\n                            value={prefixSize}\n                            min={0}\n                            onChange={(e) =>\n                              setPrefixSize(parseInt(e.target.value))\n                            }\n                          />\n                        </Form.Group>\n                      )}\n                      {currentCompressor.needsWindowSize && (\n                        <Form.Group>\n                          <Form.Label>Window Size</Form.Label>\n                          <Form.Control\n                            type=\"number\"\n                            value={windowSize}\n                            min={0}\n                            onChange={(e) =>\n                              setWindowSize(parseInt(e.target.value))\n                            }\n                          />\n                        </Form.Group>\n                      )}\n                      {currentCompressor.needsRecursionLimit && (\n                        <Form.Group>\n                          <Form.Label>Recursion Limit</Form.Label>\n                          <Form.Control\n                            type=\"number\"\n                            value={recursionLimit}\n                            min={0}\n                            onChange={(e) =>\n                              setRecursionLimit(parseInt(e.target.value))\n                            }\n                          />\n                        </Form.Group>\n                      )}\n                    </Col>\n                  </Form.Row>\n                </Form>\n              </Card.Body>\n            </Card>\n          </Col>\n        </Row>\n        <Row className=\"mt-3\">\n          <Col>\n            <Card>\n              <Card.Body>\n                <Container>\n                  <Row className=\"justify-content-center overflow-auto\">\n                    <Col xs=\"auto\">\n                      {data.type === \"lz-like\" && (\n                        <LzLikeVisualization\n                          data={data}\n                          step={currentStep}\n                        ></LzLikeVisualization>\n                      )}\n\n                      {data.type === \"rlz\" && (\n                        <RlzVisualization\n                          data={data}\n                          step={currentStep}\n                        ></RlzVisualization>\n                      )}\n                      {data.type === \"relz\" && (\n                        <RelzVisualization\n                          data={data}\n                          step={currentStep}\n                        ></RelzVisualization>\n                      )}\n                      {data.type === \"relz-rec\" && (\n                        <RelzRecVisualization\n                          data={data}\n                          step={currentStep}\n                        ></RelzRecVisualization>\n                      )}\n                    </Col>\n                  </Row>\n                  <Row className=\"justify-content-center\">\n                    <Col lg=\"8\">\n                      <StepControls\n                        step={currentStep}\n                        stepsTotal={data.steps.length}\n                        stepChanged={setCurrentStep}\n                      ></StepControls>\n                    </Col>\n                  </Row>\n                </Container>\n              </Card.Body>\n            </Card>\n          </Col>\n        </Row>\n        <Row className=\"mt-3 mb-5\">\n          <Col>\n            <EmbedUrl\n              type={selectedCompressor}\n              input={input}\n              settings={{\n                prefixSize,\n                recursionLimit,\n                reference: referenceString,\n                windowSize,\n              }}\n              step={currentStep}\n            ></EmbedUrl>\n          </Col>\n        </Row>\n      </Container>\n    </>\n  );\n}\n","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faGithub } from \"@fortawesome/free-brands-svg-icons\";\nimport React from \"react\";\nimport Container from \"react-bootstrap/esm/Container\";\nimport Nav from \"react-bootstrap/esm/Nav\";\nimport Navbar from \"react-bootstrap/esm/Navbar\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport {\n  faBalanceScaleRight,\n  faQuestion,\n  faStepForward,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nexport function AppNavbar() {\n  const location = useLocation();\n  const links = [\n    { to: \"/compare\", title: \"Compare\", icon: faBalanceScaleRight },\n    { to: \"/steps\", title: \"Step by Step\", icon: faStepForward },\n    { to: \"/quiz\", title: \"Quiz\", icon: faQuestion },\n  ];\n\n  return (\n    <Navbar collapseOnSelect expand=\"lg\" bg=\"dark\" variant=\"dark\">\n      <Container>\n        <Navbar.Brand to=\"/\" as={Link}>\n          Lempel-Ziv Playground\n        </Navbar.Brand>\n        <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\n        <Navbar.Collapse id=\"responsive-navbar-nav\">\n          <Nav className=\"mr-auto\">\n            {links.map(({ to, title, icon }) => (\n              <Nav.Link\n                key={to}\n                to={to}\n                as={Link}\n                active={location.pathname === to}\n              >\n                <FontAwesomeIcon icon={icon} /> {title}\n              </Nav.Link>\n            ))}\n          </Nav>\n          <Nav className=\"justify-content-end\">\n            <Nav.Link\n              href={\"https://github.com/jannikw/lempel-ziv\"}\n              target=\"_blank\"\n            >\n              <FontAwesomeIcon icon={faGithub} /> Source Code\n            </Nav.Link>\n          </Nav>\n        </Navbar.Collapse>\n      </Container>\n    </Navbar>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport Col from \"react-bootstrap/esm/Col\";\nimport Container from \"react-bootstrap/esm/Container\";\nimport Row from \"react-bootstrap/esm/Row\";\nimport { StepControls } from \"../components/StepControls\";\nimport { useSettingsFromQuery } from \"../hooks\";\nimport { computeData } from \"../visualization/common\";\nimport { LzLikeVisualization } from \"../visualization/LzLikeVisualization\";\nimport { RelzRecVisualization } from \"../visualization/RelzRecVisualization\";\nimport { RelzVisualization } from \"../visualization/RelzVisualization\";\nimport { RlzVisualization } from \"../visualization/RlzVisualization\";\n\nexport function Embed() {\n  const { type, input, step: initialStep, settings } = useSettingsFromQuery();\n  const data = computeData(type, input, settings);\n  const [step, setStep] = useState(0);\n\n  useEffect(() => {\n    setStep(initialStep);\n  }, [initialStep]);\n\n  return (\n    <Container fluid className=\"h-100\">\n      <Row className=\"justify-content-center overflow-auto\">\n        <Col xs=\"auto\">\n          {data?.type === \"lz-like\" && (\n            <LzLikeVisualization data={data} step={step}></LzLikeVisualization>\n          )}\n          {data?.type === \"rlz\" && (\n            <RlzVisualization\n              data={data}\n              step={step}\n            ></RlzVisualization>\n          )}\n          {data.type === \"relz\" && (\n            <RelzVisualization\n              data={data}\n              step={step}\n            ></RelzVisualization>\n          )}\n          {data.type === \"relz-rec\" && (\n            <RelzRecVisualization\n              data={data}\n              step={step}\n            ></RelzRecVisualization>\n          )}\n        </Col>\n      </Row>\n      <Row\n        className=\"mb-3 justify-content-center\"\n        style={{ position: \"absolute\", bottom: \"0\", width: \"100%\" }}\n      >\n        <Col lg=\"8\" md=\"12\">\n          <StepControls\n            step={step}\n            stepsTotal={data.steps.length}\n            stepChanged={setStep}\n          ></StepControls>\n        </Col>\n      </Row>\n    </Container>\n  );\n}\n","import React from \"react\";\nimport Container from \"react-bootstrap/esm/Container\";\n\nexport function Quiz() {\n  return <Container></Container>;\n}\n","import React from \"react\";\nimport Container from \"react-bootstrap/esm/Container\";\nimport Jumbotron from \"react-bootstrap/esm/Jumbotron\";\nimport { Link } from \"react-router-dom\";\n\nexport function Home() {\n  return (\n    <Container className=\"mt-5\">\n      <Jumbotron>\n        <h1>Lempel-Ziv Playground</h1>\n        <p>\n          This page lets you play around with the original Lempel-Ziv algorithm\n          from 1977 and other variants of the algorithm. You can compare\n          different Lempel-Ziv variants with each other{\" \"}\n          <Link to=\"/compare\">here</Link> and find out what parameters work well\n          on different inputs. You can go through the compression process step\n          by step for each algorithm and see how an input is processed{\" \"}\n          <Link to=\"/slides\">here</Link>. Finally, you can take a quiz on the\n          algorithms and think about some properties of the algorithms{\" \"}\n          <Link to=\"/quiz\">here</Link>.\n        </p>\n      </Jumbotron>\n    </Container>\n  );\n}\n","import React from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport { Compare } from \"./pages/Compare\";\nimport StepByStep from \"./pages/StepByStep\";\nimport { AppNavbar } from \"./components/AppNavbar\";\nimport { useEmbedState } from \"./hooks\";\nimport { Embed } from \"./pages/Embed\";\nimport { Quiz } from \"./pages/Quiz\";\nimport { Home } from \"./pages/Home\";\n\nfunction App() {\n  const embedded = useEmbedState();\n\n  return (\n    <>\n      {!embedded && <AppNavbar></AppNavbar>}\n      <Switch>\n        <Route exact path=\"/\">\n          <Home></Home>\n        </Route>\n        <Route exact path=\"/compare\">\n          <Compare></Compare>\n        </Route>\n        <Route exact path=\"/steps\">\n          <StepByStep></StepByStep>\n        </Route>\n        <Route exact path=\"/quiz\">\n          <Quiz></Quiz>\n        </Route>\n        <Route exact path=\"/embed\">\n          <Embed></Embed>\n        </Route>\n      </Switch>\n    </>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import \"bootstrap/dist/css/bootstrap.min.css\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { HashRouter } from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <App />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}