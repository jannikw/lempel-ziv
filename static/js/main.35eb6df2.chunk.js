(this["webpackJsonplempel-ziv-playground"]=this["webpackJsonplempel-ziv-playground"]||[]).push([[0],{84:function(e,t,n){"use strict";n.r(t);n(64);var r=n(0),s=n.n(r),c=n(31),a=n.n(c),i=n(14),o=n(10),l=n(12),p=n(22),j=n(17),u=n(21),b=n(13),h=n(8),x=n(47),f=n(60);var d={lz77:{type:"lz77",title:"LZ77",needsReference:!1,needsPrefixSize:!1,needsWindowSize:!1,needsRecursionLimit:!1},"lz-sw":{type:"lz-sw",title:"LZ with sliding window",needsReference:!1,needsPrefixSize:!1,needsWindowSize:!0,needsRecursionLimit:!1},rlz:{type:"rlz",title:"RLZ",needsReference:!0,needsPrefixSize:!1,needsWindowSize:!1,needsRecursionLimit:!1},"rlz-pref":{type:"rlz-pref",title:"RLZ using prefix",needsReference:!1,needsPrefixSize:!0,needsWindowSize:!1,needsRecursionLimit:!1},relz:{type:"relz",title:"ReLZ",needsReference:!1,needsPrefixSize:!0,needsWindowSize:!1,needsRecursionLimit:!1},"relz-rec":{type:"relz-rec",title:"Recursive ReLZ",needsReference:!1,needsPrefixSize:!0,needsWindowSize:!1,needsRecursionLimit:!0}},O=n(11),m=n(26),g=n(28),y=n(7),v=n(1);function S(e){var t=e.type,n=e.settings;function r(t){e.onChange&&e.onChange(t)}var s=d[t];return Object(v.jsxs)(j.a,{className:"h-100",children:[Object(v.jsx)(j.a.Header,{children:Object(v.jsxs)(b.a,{className:"d-flex align-items-center",children:[Object(v.jsx)(h.a,{children:Object(v.jsx)("h6",{children:s.title})}),Object(v.jsx)(h.a,{children:Object(v.jsxs)(p.a,{variant:"outline-danger",className:"float-right",size:"sm",onClick:function(){return e.remove&&e.remove()},children:["Remove ",Object(v.jsx)(g.a,{icon:m.h})]})})]})}),Object(v.jsxs)(j.a.Body,{children:["lz77"===t&&"no settings",Object(v.jsxs)(y.a,{children:[s.needsWindowSize&&Object(v.jsxs)(y.a.Group,{as:b.a,children:[Object(v.jsx)(y.a.Label,{column:!0,xs:"4",children:"Window Size"}),Object(v.jsx)(h.a,{xs:"8",children:Object(v.jsx)(y.a.Control,{type:"number",value:n.windowSize,min:0,onChange:function(e){return r(Object(O.a)(Object(O.a)({},n),{},{windowSize:parseInt(e.target.value)}))}})})]}),s.needsPrefixSize&&Object(v.jsxs)(y.a.Group,{as:b.a,children:[Object(v.jsx)(y.a.Label,{column:!0,xs:"4",children:"Prefix Length"}),Object(v.jsx)(h.a,{xs:"8",children:Object(v.jsx)(y.a.Control,{type:"number",value:n.prefixSize,min:0,onChange:function(e){return r(Object(O.a)(Object(O.a)({},n),{},{prefixSize:parseInt(e.target.value)}))}})})]}),s.needsRecursionLimit&&Object(v.jsxs)(y.a.Group,{as:b.a,children:[Object(v.jsx)(y.a.Label,{column:!0,xs:"4",children:"Recursion Limit"}),Object(v.jsx)(h.a,{xs:"8",children:Object(v.jsx)(y.a.Control,{type:"number",value:n.recursionLimit,min:0,onChange:function(e){return r(Object(O.a)(Object(O.a)({},n),{},{recursionLimit:parseInt(e.target.value)}))}})})]}),s.needsReference&&Object(v.jsxs)(y.a.Group,{as:b.a,children:[Object(v.jsx)(y.a.Label,{column:!0,xs:"4",children:"Reference String"}),Object(v.jsx)(h.a,{xs:"8",children:Object(v.jsx)(y.a.Control,{type:"text",value:n.reference,onChange:function(e){return r(Object(O.a)(Object(O.a)({},n),{},{reference:e.target.value}))}})})]})]})]})]})}var z=n(9),w=n(46),k=n(34),C=n.n(k);function P(e,t){e:for(var n=0;n<=e.length-t.length;n++){for(var r=0;r<t.length;r++)if(e[n+r]!==t[r])continue e;return n}return-1}function L(e,t){e:for(var n=e.length-t.length;n>=0;n--){for(var r=0;r<t.length;r++)if(e[n+r]!==t[r])continue e;return n}return-1}function M(e){for(var t=[],n=0;n<e.length;n++){var r=e.codePointAt(n);if(!r)break;t.push(r)}return t}var R=C.a.mark(B),N=C.a.mark(A),E=C.a.mark(I);function B(e){var t,n,r,s,c;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t=0;case 1:if(!(t<e.length)){a.next=26;break}n=0,r=0;case 4:if(!(t+n<e.length)){a.next=15;break}if(s=e.slice(t,t+n+1),-1===(c=L(e.slice(0,t+n),s))){a.next=12;break}n++,r=c,a.next=13;break;case 12:return a.abrupt("break",15);case 13:a.next=4;break;case 15:if(0!==n){a.next=21;break}return a.next=18,{type:"literal",pos:t,symbol:e[t],l:1};case 18:t+=1,a.next=24;break;case 21:return a.next=23,{type:"copy",pos:t,p:r,l:n};case 23:t+=n;case 24:a.next=1;break;case 26:case"end":return a.stop()}}),R)}function A(e,t){var n,r,s,c,a,i;return C.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:n=0;case 1:if(!(n<e.length)){o.next=27;break}r=0,s=0;case 4:if(!(n+r<e.length)){o.next=16;break}if(c=e.slice(n,n+r+1),a=Math.max(0,n-t),-1===(i=L(e.slice(a,Math.min(a+t,n+r)),c))){o.next=13;break}r++,s=i+a,o.next=14;break;case 13:return o.abrupt("break",16);case 14:o.next=4;break;case 16:if(0!==r){o.next=22;break}return o.next=19,{type:"literal",pos:n,symbol:e[n],l:1};case 19:n+=1,o.next=25;break;case 22:return o.next=24,{type:"copy",pos:n,p:s,l:r};case 24:n+=r;case 25:o.next=1;break;case 27:case"end":return o.stop()}}),N)}function I(e,t){var n,r,s,c,a;return C.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:n=0;case 1:if(!(n<e.length)){i.next=26;break}r=0,s=0;case 4:if(!(n+r<e.length)){i.next=15;break}if(c=e.slice(n,n+r+1),-1===(a=P(t,c))){i.next=12;break}r++,s=a,i.next=13;break;case 12:return i.abrupt("break",15);case 13:i.next=4;break;case 15:if(0!==r){i.next=21;break}return i.next=18,{rlz:!0,type:"literal",pos:n,symbol:e[n],l:1};case 18:n+=1,i.next=24;break;case 21:return i.next=23,{rlz:!0,type:"copy",pos:n,p:s,l:r};case 23:n+=r;case 24:i.next=1;break;case 26:case"end":return i.stop()}}),E)}function T(e,t){for(var n=[],r=[],s=0;s<e.length;){for(var c=0,a=0;s+c<e.length;){var i=e.slice(s,s+c+1),o=L(e.slice(0,Math.min(s+c,t)),i);if(-1===o||!(s>=t||s+c<t))break;c++,a=o}if(0===c){var l={type:"literal",pos:s,symbol:e[s],l:1};s<t?n.push(l):r.push(l),s+=1}else{var p={type:"copy",pos:s,p:a,l:c};s<t?n.push(p):r.push(p),s+=c}}return[n,r]}function W(e,t){var n=new Map,r=[],s=[];function c(e){var s,c="literal"===e.type?[e.symbol]:t.slice(e.p,e.p+e.l),a=Object(w.a)(r);try{for(a.s();!(s=a.n()).done;){var i=Object(l.a)(s.value,2),o=i[0],p=i[1];if(Object(z.isEqual)(o,c))return p}}catch(u){a.e(u)}finally{a.f()}var j=n.size;return n.set(j,e),r.push([c,j]),j}var a,i=Object(w.a)(e);try{for(i.s();!(a=i.n()).done;){var o=a.value;s.push(c(o))}}catch(p){i.e(p)}finally{i.f()}return[n,s]}function F(e,t,n,r){for(var s=[],c=0;c<e.length;c++){var a=Object(z.sum)(s.map((function(e){return e.l})))+r,i=e[c];if("literal"===i.type){var o=t.get(i.symbol);if(void 0===o)throw new Error("no mapping for symbol "+i.symbol);s.push(Object(O.a)(Object(O.a)({},o),{},{pos:a}))}else{var l=Object(z.sumBy)(n.slice(0,i.p).map((function(e){return t.get(e)})),(function(e){return e.l}))+r,p=Object(z.sumBy)(n.slice(i.p,i.p+i.l).map((function(e){return t.get(e)})),(function(e){return e.l}));s.push({type:"copy",pos:a,p:l,l:p})}}return s}function G(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(0===n)return{passes:[],phrases:e.map((function(e,t){return{type:"literal",pos:t,symbol:e,l:1}}))};var r=Object(o.a)(T(e,t)),s=r[0],c=r[1];if(c.length>0){var a=W(c,e.slice(0,t)),i=Object(l.a)(a,2),p=i[0],j=i[1],u=G(j,t,n&&n-1),b=u.phrases,h=F(b,p,j,t),x=[].concat(Object(o.a)(s),Object(o.a)(h));return{passes:[{input:e,prefixPhrases:s,suffixPhrases:c,suffixMetaSymbols:j,suffixMetaSymbolsPhrases:b,suffixPhrasesCompressed:h,phrasesCompressed:x}].concat(Object(o.a)(u.passes)),phrases:x}}return{passes:[{input:e,prefixPhrases:s,suffixPhrases:[],suffixMetaSymbols:[],suffixMetaSymbolsPhrases:[],suffixPhrasesCompressed:[],phrasesCompressed:s}],phrases:s}}function D(e,t,n){var r=M(t);if("lz77"===e){var s=Object(o.a)(B(r));return{type:"lz-like",input:t,steps:[{type:"initial"}].concat(Object(o.a)(Object(z.range)(s.length).map((function(e){return{type:"compress",phrase:e}}))),[{type:"result"}]),phrases:s}}if("lz-sw"===e){var c=Object(o.a)(A(r,n.windowSize)),a=[{type:"initial"}].concat(Object(o.a)(Object(z.range)(c.length).map((function(e){return{type:"compress",phrase:e}}))),[{type:"result"}]);return{type:"lz-like",input:t,phrases:c,windowSize:n.windowSize,steps:a}}if("rlz"===e){var i=n.reference,p=M(i),j=Object(o.a)(I(r,p));return{type:"rlz",input:t,reference:i,phrases:j,steps:[{type:"initial"}].concat(Object(o.a)(Object(z.range)(j.length).map((function(e){return{type:"compress",phrase:e}}))),[{type:"result"}])}}if("rlz-pref"===e){var u=Object(o.a)(T(r,n.prefixSize)),b=u[0],h=u[1],x=[].concat(Object(o.a)(b),Object(o.a)(h)),f=[{type:"initial"}].concat(Object(o.a)(Object(z.range)(x.length).map((function(e){return{type:"compress",phrase:e}}))),[{type:"result"}]);return{type:"lz-like",input:t,phrases:x,prefixLength:n.prefixSize,steps:f}}if("relz"===e){var d=function(e,t){var n=Object(o.a)(T(e,t)),r=n[0],s=n[1],c=[].concat(Object(o.a)(r),Object(o.a)(s)),a=W(c,e),i=Object(l.a)(a,2),p=i[0],j=i[1],u=Object(o.a)(B(j));return{firstPassPhrases:c,metaSymbols:j,metaSymbolPhrases:u,phrases:F(u,p,j,0)}}(r,n.prefixSize),m=[{type:"initial"}].concat(Object(o.a)(Object(z.range)(d.firstPassPhrases.length).map((function(e){return{type:"compress-first",phrase:e}}))),[{type:"mapping"}],Object(o.a)(Object(z.range)(d.metaSymbolPhrases.length).map((function(e){return{type:"compress-second",phrase:e}}))),Object(o.a)(Object(z.range)(d.phrases.length).map((function(e){return{type:"back-mapping",phrase:e}}))));return Object(O.a)(Object(O.a)({type:"relz",input:t,prefixLength:n.prefixSize},d),{},{steps:m})}var g=G(r,n.prefixSize,n.recursionLimit),y=g.passes.length-1,v=[{type:"initial"}].concat(Object(o.a)(g.passes.flatMap((function(e,t){return[].concat(Object(o.a)(e.prefixPhrases.map((function(e,n){return{type:"compress",pass:t,phrase:n}}))),Object(o.a)(e.suffixPhrases.map((function(n,r){return{type:"compress",pass:t,phrase:r+e.prefixPhrases.length}}))),Object(o.a)(t===y?[]:[{type:"mapping",pass:t}]))}))),Object(o.a)(Object(z.reverse)(Object(o.a)(g.passes)).flatMap((function(e,t){return e.suffixPhrasesCompressed.map((function(e,n){return{type:"back-mapping",pass:g.passes.length-t-1,suffixPhrase:n}}))}))));return{type:"relz-rec",input:t,prefixLength:n.prefixSize,passes:g.passes,phrases:g.phrases,steps:v}}var Z="#E1BE6A",q="#40B0A6";function H(){return Object(v.jsxs)("defs",{children:[Object(v.jsx)("marker",{id:"arrowhead",markerWidth:"100",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:Object(v.jsx)("polygon",{points:"0 0, 10 3.5, 0 7"})}),Object(v.jsxs)("linearGradient",{id:"split-color",gradientTransform:"rotate(45)",children:[Object(v.jsx)("stop",{offset:"75%",stopColor:Z}),Object(v.jsx)("stop",{offset:"75%",stopColor:q})]})]})}function Y(e){var t=e.x1,n=e.x2,r=e.y,s=n-t;return Object(v.jsx)("path",{d:"M ".concat(t," ").concat(r," v -20 h ").concat(s," v 19"),"marker-end":"url(#arrowhead)",stroke:"black",fill:"none"})}function Q(e){var t=e.x1,n=e.y1,r=e.x2,s=e.y2;if(e.straight){var c=n<s?10:-10,a=n<s?20:-20;return Object(v.jsx)("path",{d:"M ".concat(t," ").concat(n," v ").concat(c," L ").concat(r," ").concat(s-20," v ").concat(a),markerEnd:"url(#arrowhead)",stroke:"black",fill:"none"})}var i=r-t,o=(s-n)/2,l=s<n?o:-o,p=s<n?o:-o;return Object(v.jsx)("path",{d:"m ".concat(t," ").concat(n," v ").concat(l," h ").concat(i," v ").concat(p),"marker-end":"url(#arrowhead)",stroke:"black",fill:"none"})}function J(e){var t=e.x,n=e.y,r=e.text,s=e.color,c=e.w||30,a=e.h||30,i="source"===s?q:"target"===s?Z:"source-target"===s?"url(#split-color)":"none";return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("rect",{x:t,y:n,width:c,height:a,fill:i,stroke:"black"}),Object(v.jsx)("foreignObject",{x:t,y:n,width:c,height:a,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,children:Object(v.jsx)("div",{style:{overflowY:"auto",textAlign:"center",verticalAlign:"middle",lineHeight:"".concat(a,"px"),userSelect:"none"},children:r})})]})}function U(e){var t=e.x1,n=e.y1,r=e.x2,s=e.y2,c=e.w,a=e.q,i=t-r,o=n-s,l=Math.sqrt(i*i+o*o),p=t+a*c*(o/=l),j=n-a*c*(i/=l),u=t-.25*l*i+(1-a)*c*o,b=n-.25*l*o-(1-a)*c*i,h=t-.5*l*i+c*o,x=n-.5*l*o-c*i,f=r+a*c*o,d=s-a*c*i,O=t-.75*l*i+(1-a)*c*o,m=n-.75*l*o-(1-a)*c*i,g="M ".concat(t," ").concat(n," Q ").concat(p," ").concat(j," ").concat(u," ").concat(b," T ").concat(h," ").concat(x," M ").concat(r," ").concat(s," Q ").concat(f," ").concat(d," ").concat(O," ").concat(m," T ").concat(h," ").concat(x);return Object(v.jsx)("path",{d:g,stroke:"black",fill:"none"})}function X(e){var t=e.x,n=e.y,r=e.l,s=e.text;if(1===r)return Object(v.jsx)("foreignObject",{x:t-20,y:n,width:"60",height:"40",children:Object(v.jsx)("div",{style:{overflowY:"auto",textAlign:"center",verticalAlign:"middle",lineHeight:"40px",userSelect:"none",transform:"rotate(-45deg)"},children:s})});var c,a=t+3,i=t+30*r-3,o=null!==(c=e.w)&&void 0!==c?c:50;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(U,{x1:a,x2:i,y1:n,y2:n,w:10,q:.6}),Object(v.jsx)("foreignObject",{x:a+Math.abs(i-a)/2-o/2,y:n,width:o,height:"40",children:Object(v.jsx)("div",{style:{overflowY:"auto",textAlign:"center",verticalAlign:"middle",lineHeight:"40px",userSelect:"none"},children:s})})]})}function _(e){var t=e.data,n=Object(r.useState)(),s=Object(l.a)(n,2),c=s[0],a=s[1],i=void 0!==c?t.phrases[c]:void 0,o=t.input.split("").map((function(e,t){return{text:e,x:30*t+30,y:30}})),p=[],j=void 0;if("rlz"===t.type?t.phrases.forEach((function(e,t){var n=e.pos;if("literal"===e.type){var r="(".concat(String.fromCodePoint(e.symbol),",0)");p.push({x:30*n+30,y:65,l:1,text:r})}else{var s="(".concat(e.p,",").concat(e.l,")");p.push({x:30*n+30,y:65,l:e.l,text:s})}for(var c=0;c<e.l;c++)o[e.pos+c].onMouseEnter=function(){return a(t)},o[e.pos+c].onMouseLeave=function(){return a(void 0)}})):t.phrases.forEach((function(e,t){var n=e.pos;if("literal"===e.type){var r="(".concat(String.fromCodePoint(e.symbol),",0)");p.push({x:30*n+30,y:65,l:1,text:r})}else{var s="(".concat(e.p,",").concat(e.l,")");p.push({x:30*n+30,y:65,l:e.l,text:s})}for(var c=0;c<e.l;c++)o[e.pos+c].onMouseEnter=function(){return a(t)},o[e.pos+c].onMouseLeave=function(){return a(void 0)}})),i){for(var u=0;u<i.l;u++)o[i.pos+u].color="target","rlz"!==t.type&&"copy"===i.type&&("target"===o[i.p+u].color?o[i.p+u].color="source-target":o[i.p+u].color="source");"rlz"!==t.type&&"copy"===i.type&&(j={x1:30*i.pos+45,x2:30*i.p+45,y:30})}var b=30*t.input.length+60;return Object(v.jsxs)("svg",{width:b,height:120,children:[Object(v.jsx)(H,{}),o.map((function(e,t){return Object(v.jsx)(J,Object(O.a)({},e),t)})),p.map((function(e,t){return Object(v.jsx)(X,Object(O.a)({},e),t)})),j&&Object(v.jsx)(Y,Object(O.a)({},j))]})}function K(e){var t=e.type,n=e.settings,r=e.input,s=D(t,r,n);return Object(v.jsx)(j.a,{style:{height:"100%"},children:Object(v.jsxs)(j.a.Body,{children:[Object(v.jsx)(b.a,{className:"overflow-auto",children:Object(v.jsx)(h.a,{children:Object(v.jsx)(_,{data:s})})}),Object(v.jsxs)(b.a,{children:[Object(v.jsxs)(h.a,{children:["z = ",s.phrases.length,"rlz"===t?" (+ ".concat(n.reference.length,")"):""]}),Object(v.jsxs)(h.a,{children:["l/z = ",(r.length/s.phrases.length).toFixed(2)]})]})]})})}var V=n(38);function $(){var e=Object(r.useState)("AAABBBCCCC"),t=Object(l.a)(e,2),n=t[0],s=t[1],c=Object(r.useState)("lz77"),a=Object(l.a)(c,2),i=a[0],O=a[1],m=Object(r.useState)(Object(z.keys)(d).map((function(e){return[e,{windowSize:5,reference:"",prefixSize:5,recursionLimit:5}]}))),g=Object(l.a)(m,2),y=g[0],w=g[1];return Object(v.jsxs)(u.a,{className:"my-5",children:[Object(v.jsx)(b.a,{children:Object(v.jsx)(h.a,{children:Object(v.jsxs)(j.a,{children:[Object(v.jsx)(j.a.Header,{children:"Input"}),Object(v.jsx)(j.a.Body,{children:Object(v.jsx)(V.a,{type:"text",placeholder:"Input Text",value:n,onChange:function(e){return s(e.target.value)}})})]})})}),Object(v.jsxs)(b.a,{className:"mt-5",children:[Object(v.jsx)(h.a,{lg:"4",children:Object(v.jsx)("h2",{children:"Compressors"})}),Object(v.jsx)(h.a,{lg:"8",className:"d-none d-lg-block",children:Object(v.jsx)("h2",{children:"Outputs"})})]}),Object(v.jsx)(b.a,{children:Object(v.jsx)(h.a,{xs:"12",md:"4",lg:"3",children:Object(v.jsxs)(x.a,{as:f.a,className:"w-100",children:[Object(v.jsx)(p.a,{onClick:function(){w([].concat(Object(o.a)(y),[[i,{windowSize:5,reference:"",prefixSize:5,recursionLimit:5}]]))},className:"w-75",children:"Add "+d[i].title}),Object(v.jsx)(x.a.Toggle,{split:!0}),Object(v.jsx)(x.a.Menu,{children:Object(z.entries)(d).map((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1].title;return Object(v.jsx)(x.a.Item,{onClick:function(){return O(n)},children:r},n)}))})]})})}),y.map((function(e,t){var r=Object(l.a)(e,2),s=r[0],c=r[1];return Object(v.jsxs)(b.a,{className:"mt-4",children:[Object(v.jsx)(h.a,{xs:"12",lg:"4",children:Object(v.jsx)(S,{type:s,settings:c,onChange:function(e){return w(y.map((function(n,r){var s=Object(l.a)(n,2),c=s[0],a=s[1];return t===r?[c,e]:[c,a]})))},remove:function(){return w(y.filter((function(e,n){return n!==t})))}})}),Object(v.jsx)(h.a,{xs:"12",lg:"8",className:"mt-1 mt-lg-0",children:Object(v.jsx)(K,{type:s,settings:c,input:n})})]},t)})),0===y.length&&Object(v.jsx)(b.a,{className:"justify-content-center mt-5",children:Object(v.jsx)(h.a,{xs:"auto",children:Object(v.jsx)("h4",{children:"No compressors added yet..."})})})]})}function ee(e){var t=e.data,n=e.step,r=t.steps[Math.min(n,t.steps.length-1)],s=t.input.split("").map((function(e,t){return{text:e,x:30*t+30,y:30}})),c=[],a=void 0,i="compress"===r.type?r.phrase+1:"result"===r.type?t.phrases.length:0;if(Object(z.take)(t.phrases,i).forEach((function(e){var t=e.pos;if("literal"===e.type){var n="(".concat(String.fromCodePoint(e.symbol),",0)");c.push({x:30*t+30,y:65,l:1,text:n})}else{var r="(".concat(e.p,",").concat(e.l,")");c.push({x:30*t+30,y:65,l:e.l,text:r})}})),"compress"===r.type){var o=t.phrases[r.phrase];"copy"===o.type&&(a={x1:30*o.pos+45,x2:30*o.p+45,y:30});for(var l=0;l<o.l;l++)s[o.pos+l].color="target","copy"===o.type&&("target"===s[o.p+l].color?s[o.p+l].color="source-target":s[o.p+l].color="source")}return Object(v.jsxs)("svg",{height:"160",width:30*t.input.length+40,children:[Object(v.jsx)(H,{}),s.map((function(e,t){return Object(v.jsx)(J,Object(O.a)({},e),t)})),c.map((function(e,t){return Object(v.jsx)(X,Object(O.a)({},e),t)})),a&&Object(v.jsx)(Y,Object(O.a)({},a))]})}function te(e){var t=e.data,n=e.step,r=t.steps[Math.min(n,t.steps.length-1)],s=t.reference.split("").map((function(e,t){return{text:e,x:30*t+30,y:10}})),c=t.input.split("").map((function(e,t){return{text:e,x:30*t+30,y:90}})),a=[],i=void 0,o="compress"===r.type?r.phrase+1:"result"===r.type?t.phrases.length:0;if(Object(z.take)(t.phrases,o).forEach((function(e){var t=e.pos;if("literal"===e.type){var n="(".concat(String.fromCodePoint(e.symbol),",0)");a.push({x:30*t+30,y:125,l:1,text:n})}else{var r="(".concat(e.p,",").concat(e.l,")");a.push({x:30*t+30,y:125,l:e.l,text:r})}})),"compress"===r.type){var l=t.phrases[r.phrase];"copy"===l.type&&(i={x1:30*l.pos+45,y1:90,x2:30*l.p+45,y2:41});for(var p=0;p<l.l;p++)c[l.pos+p].color="target","copy"===l.type&&(s[l.p+p].color="source")}return Object(v.jsxs)("svg",{height:"200",width:"100%",children:[Object(v.jsx)(H,{}),s.map((function(e,t){return Object(v.jsx)(J,Object(O.a)({},e),t)})),c.map((function(e,t){return Object(v.jsx)(J,Object(O.a)({},e),t)})),i&&Object(v.jsx)(Q,Object(O.a)({},i)),a.map((function(e,t){return Object(v.jsx)(X,Object(O.a)({},e),t)}))]})}function ne(e){var t=e.data;e.step,t.input,t.phrases,t.firstPassPhrases,t.metaSymbolPhrases;return Object(v.jsx)("svg",{height:"500",width:"100%",children:Object(v.jsx)(H,{})})}function re(e){var t=e.data,n=e.step,r=t.passes,s=t.prefixLength,c=120,a=t.steps[Math.min(n,t.steps.length-1)];console.log(a);var i=r.reduce((function(e,t){var n,r=(null!==(n=Object(z.last)(e))&&void 0!==n?n:0)+Object(z.sum)(t.prefixPhrases.map((function(e){return e.l})));return[].concat(Object(o.a)(e),[r])}),[0]),p="initial"===a.type?[1,0,0,0]:"compress"===a.type?[a.pass+1,a.phrase+1,a.pass-1]:"mapping"===a.type?[a.pass+2,0,a.pass+1]:[r.length,s,0,a.pass,a.suffixPhrase],j=Object(l.a)(p,4),u=j[0],b=j[1],h=j[2],x=j[3],f=Object(z.take)(r,u).map((function(e,t){return e.input.map((function(e,n){return{x:30*n+30*i[t]+30,y:t*c+30,text:0===t?String.fromCodePoint(e):String(e),color:"none"}}))})),d=[],m=[],g=void 0;if("compress"===a.type){var y=[].concat(Object(o.a)(r[a.pass].prefixPhrases),Object(o.a)(r[a.pass].suffixPhrases))[a.phrase];if("copy"===y.type){g={x1:30*y.pos+30*i[a.pass]+45,x2:30*y.p+30*i[a.pass]+45,y:a.pass*c+30};for(var S=0;S<y.l;S++)f[a.pass][y.pos+S].color="target","target"===f[a.pass][y.p+S].color?f[a.pass][y.p+S].color="source-target":f[a.pass][y.p+S].color="source"}else f[a.pass][y.pos].color="target"}if("back-mapping"===a.type){var w=r[a.pass].suffixPhrasesCompressed[a.suffixPhrase];Object(z.drop)(r,x).forEach((function(e,t){var n=t+a.pass;Object(z.take)(e.suffixPhrasesCompressed,n===a.pass?a.suffixPhrase+1:r[n].suffixPhrasesCompressed.length).forEach((function(e,t){var s=e.pos;if("literal"===e.type){var a="(".concat(0===n?String.fromCodePoint(e.symbol):String(e.symbol),",0)");d.push({x:30*s+30*i[n]+30,y:65+c*n,l:1,text:a})}else{var o="(".concat(e.p,",").concat(e.l,")");d.push({x:30*s+30*i[n]+30,y:65+c*n,l:e.l,text:o})}var l=r[n+1].phrasesCompressed[t];m.push({x1:30*l.pos+30+15*l.l+30*i[n+1],y1:150+n*c,x2:30*e.pos+30+15*e.l+30*i[n],y2:140+n*c,straight:!0})})),Object(z.dropWhile)(e.suffixPhrases,(function(e){return n!==a.pass||e.pos<w.pos+w.l})).forEach((function(e){var t=e.pos;if("literal"===e.type){var r="(".concat(0===n?String.fromCodePoint(e.symbol):String(e.symbol),",0)");d.push({x:30*t+30*i[n]+30,y:65+c*n,l:1,text:r})}else{var s="(".concat(e.p,",").concat(e.l,")");d.push({x:30*t+30*i[n]+30,y:65+c*n,l:e.l,text:s})}}))}))}return Object(z.take)(r,u).forEach((function(e,t){Object(z.take)(e.prefixPhrases,t===u-1?b:e.prefixPhrases.length).forEach((function(e){var n=e.pos;if("literal"===e.type){var r="(".concat(0===t?String.fromCodePoint(e.symbol):String(e.symbol),",0)");d.push({x:30*n+30*i[t]+30,y:65+c*t,l:1,text:r})}else{var s="(".concat(e.p,",").concat(e.l,")");d.push({x:30*n+30*i[t]+30,y:65+c*t,l:e.l,text:s})}})),Object(z.take)(e.suffixPhrases,t===u-1?b-e.prefixPhrases.length:void 0!==x&&t>=x?0:e.suffixPhrases.length).forEach((function(e){var n=e.pos;if("literal"===e.type){var r="(".concat(0===t?String.fromCodePoint(e.symbol):String(e.symbol),",0)");d.push({x:30*n+30*i[t]+30,y:65+c*t,l:1,text:r})}else{var s="(".concat(e.p,",").concat(e.l,")");d.push({x:30*n+30*i[t]+30,y:65+c*t,l:e.l,text:s})}}))})),Object(z.take)(r,h).forEach((function(e,t){return e.suffixPhrases.forEach((function(e,n){m.push({x1:30*e.pos+30+15*e.l+30*i[t],y1:100+t*c,x2:30*n+30*i[t+1]+45,y2:150+t*c,straight:!0})}))})),Object(v.jsxs)("svg",{height:r.length*c,width:30*t.input.length+60,children:[Object(v.jsx)(H,{}),f.map((function(e,t){return e.map((function(e,n){return Object(v.jsx)(J,Object(O.a)({},e),"".concat(t,"+").concat(n))}))})),d.map((function(e,t){return Object(v.jsx)(X,Object(O.a)({},e),t)})),m.map((function(e,t){return Object(v.jsx)(Q,Object(O.a)({},e),t)})),g&&Object(v.jsx)(Y,Object(O.a)({},g))]})}var se=n(57);function ce(e){var t=e.type,n=e.input,s=e.settings,c=e.step,a=Object(r.useState)(!0),i=Object(l.a)(a,2),o=i[0],u=i[1],b=Object(r.useState)(!1),h=Object(l.a)(b,2),x=h[0],f=h[1],O=new URLSearchParams;O.set("type",t),O.set("input",n),d[t].needsPrefixSize&&O.set("prefix",String(s.prefixSize)),d[t].needsWindowSize&&O.set("window",String(s.windowSize)),d[t].needsRecursionLimit&&O.set("recursion",String(s.recursionLimit)),d[t].needsReference&&O.set("reference",s.reference),o&&O.set("step",String(c));var m=x?"/embed":"/steps",g="".concat(window.location.origin).concat(window.location.pathname,"/#").concat(m,"?").concat(O.toString());return Object(v.jsx)(j.a,{children:Object(v.jsx)(j.a.Body,{children:Object(v.jsxs)(y.a,{children:[Object(v.jsxs)(se.a,{className:"mb-3",children:[Object(v.jsx)(V.a,{value:g,readOnly:!0}),Object(v.jsx)(se.a.Append,{children:Object(v.jsx)(p.a,{variant:"outline-secondary",onClick:function(){return navigator.clipboard.writeText(g)},children:"Copy"})})]}),Object(v.jsx)(y.a.Check,{custom:!0,type:"checkbox",label:"Include current step",id:"includeStep",onChange:function(e){return u(e.target.checked)},checked:o}),Object(v.jsx)(y.a.Check,{custom:!0,type:"checkbox",label:"Embed visualization",id:"embed",onChange:function(e){return f(e.target.checked)},checked:x})]})})})}function ae(e){var t=e.step,n=e.stepsTotal,r=e.stepChanged;function s(e){r&&r(Math.max(0,Math.min(n-1,e)))}return Object(v.jsx)(u.a,{fluid:!0,children:Object(v.jsxs)(b.a,{className:"no-gutters",children:[Object(v.jsx)(h.a,{children:Object(v.jsxs)(p.a,{style:{width:"100%"},disabled:0===t,onClick:function(){return s(0)},children:[Object(v.jsx)(g.a,{icon:m.c})," First"]})}),Object(v.jsx)(h.a,{className:"ml-2",children:Object(v.jsxs)(p.a,{style:{width:"100%"},disabled:0===t,onClick:function(){return s(t-1)},children:[Object(v.jsx)(g.a,{icon:m.a})," Previous"]})}),Object(v.jsx)(h.a,{className:"text-center my-auto",children:Object(v.jsx)("h5",{children:"".concat(t+1," / ").concat(n)})}),Object(v.jsx)(h.a,{className:"ml-2",children:Object(v.jsxs)(p.a,{style:{width:"100%"},disabled:t>=n-1,onClick:function(){return s(t+1)},children:["Next ",Object(v.jsx)(g.a,{icon:m.e})]})}),Object(v.jsx)(h.a,{className:"ml-2",children:Object(v.jsxs)(p.a,{style:{width:"100%"},disabled:t>=n-1,onClick:function(){return s(n-1)},children:["Last ",Object(v.jsx)(g.a,{icon:m.d})]})})]})})}function ie(){var e=Object(i.f)();return Object(r.useMemo)((function(){return new URLSearchParams(e.search)}),[e.search])}function oe(){var e,t,n=ie(),s=n.get("type"),c=null!==(e=n.get("input"))&&void 0!==e?e:"AABCDDDCABBDBADDACB",a=parseInt(null!==(t=n.get("step"))&&void 0!==t?t:"0"),i=n.get("window"),o=n.get("prefix"),l=n.get("recursion"),p=n.get("reference"),j=Object(r.useMemo)((function(){return{windowSize:null===i?5:parseInt(i),prefixSize:null===o?5:parseInt(o),recursionLimit:null===l?5:parseInt(l),reference:null===p?"":p}}),[i,o,l,p]);return Object(r.useMemo)((function(){return null!==s&&Object(z.keys)(d).includes(s)?{type:s,input:c,step:a,settings:j}:{type:"lz77",input:c,step:a,settings:j}}),[s,c,a,j])}function le(){var e=Object(r.useState)("ABCCDBCCABDD"),t=Object(l.a)(e,2),n=t[0],s=t[1],c=Object(r.useState)(0),a=Object(l.a)(c,2),i=a[0],o=a[1],p=Object(r.useState)("lz77"),x=Object(l.a)(p,2),f=x[0],O=x[1],m=d[f],g=Object(r.useState)(""),S=Object(l.a)(g,2),w=S[0],k=S[1],C=Object(r.useState)(5),P=Object(l.a)(C,2),L=P[0],M=P[1],R=Object(r.useState)(5),N=Object(l.a)(R,2),E=N[0],B=N[1],A=Object(r.useState)(5),I=Object(l.a)(A,2),T=I[0],W=I[1],F=oe();Object(r.useEffect)((function(){console.log(F),O(F.type),s(F.input),k(F.settings.reference),M(F.settings.windowSize),B(F.settings.prefixSize),W(F.settings.recursionLimit),o(F.step)}),[F]);var G=D(f,n,{reference:w,windowSize:L,prefixSize:E,recursionLimit:T});return Object(r.useEffect)((function(){o(Math.min(G.steps.length-1,i))}),[G,G.steps.length,i]),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(u.a,{children:[Object(v.jsx)(b.a,{className:"mt-5",children:Object(v.jsx)(h.a,{children:Object(v.jsxs)(j.a,{children:[Object(v.jsx)(j.a.Header,{children:"Settings"}),Object(v.jsx)(j.a.Body,{children:Object(v.jsxs)(y.a,{children:[Object(v.jsxs)(y.a.Group,{children:[Object(v.jsx)(y.a.Label,{children:"Input String"}),Object(v.jsx)(y.a.Control,{value:n,onChange:function(e){return s(e.target.value)}})]}),Object(v.jsxs)(y.a.Row,{children:[Object(v.jsx)(h.a,{children:Object(v.jsxs)(y.a.Group,{children:[Object(v.jsx)(y.a.Label,{children:"Compression Algorithm"}),Object(z.values)(d).map((function(e){return Object(v.jsx)(y.a.Check,{label:e.title,name:"compressor-group",type:"radio",checked:f===e.type,onChange:function(){return O(e.type)}},e.type)}))]})}),Object(v.jsxs)(h.a,{children:[m.needsReference&&Object(v.jsxs)(y.a.Group,{children:[Object(v.jsx)(y.a.Label,{children:"Reference"}),Object(v.jsx)(y.a.Control,{placeholder:"Reference String",value:w,onChange:function(e){return k(e.target.value)}})]},"reference-string"),m.needsPrefixSize&&Object(v.jsxs)(y.a.Group,{children:[Object(v.jsx)(y.a.Label,{children:"Prefix Size"}),Object(v.jsx)(y.a.Control,{type:"number",value:E,min:0,onChange:function(e){return B(parseInt(e.target.value))}})]}),m.needsWindowSize&&Object(v.jsxs)(y.a.Group,{children:[Object(v.jsx)(y.a.Label,{children:"Window Size"}),Object(v.jsx)(y.a.Control,{type:"number",value:L,min:0,onChange:function(e){return M(parseInt(e.target.value))}})]}),m.needsRecursionLimit&&Object(v.jsxs)(y.a.Group,{children:[Object(v.jsx)(y.a.Label,{children:"Recursion Limit"}),Object(v.jsx)(y.a.Control,{type:"number",value:T,min:0,onChange:function(e){return W(parseInt(e.target.value))}})]})]})]})]})})]})})}),Object(v.jsx)(b.a,{className:"mt-3",children:Object(v.jsx)(h.a,{children:Object(v.jsx)(j.a,{children:Object(v.jsx)(j.a.Body,{children:Object(v.jsxs)(u.a,{children:[Object(v.jsx)(b.a,{className:"justify-content-center overflow-auto",children:Object(v.jsxs)(h.a,{xs:"auto",children:["lz-like"===G.type&&Object(v.jsx)(ee,{data:G,step:i}),"rlz"===G.type&&Object(v.jsx)(te,{data:G,step:i}),"relz"===G.type&&Object(v.jsx)(ne,{data:G,step:i}),"relz-rec"===G.type&&Object(v.jsx)(re,{data:G,step:i})]})}),Object(v.jsx)(b.a,{className:"justify-content-center",children:Object(v.jsx)(h.a,{lg:"8",children:Object(v.jsx)(ae,{step:i,stepsTotal:G.steps.length,stepChanged:o})})})]})})})})}),Object(v.jsx)(b.a,{className:"mt-3 mb-5",children:Object(v.jsx)(h.a,{children:Object(v.jsx)(ce,{type:f,input:n,settings:{prefixSize:E,recursionLimit:T,reference:w,windowSize:L},step:i})})})]})})}var pe=n(62),je=n(49),ue=n(48),be=n(25);function he(){var e=Object(i.f)(),t=[{to:"/compare",title:"Compare",icon:m.b},{to:"/steps",title:"Step by Step",icon:m.g},{to:"/quiz",title:"Quiz",icon:m.f}];return Object(v.jsx)(ue.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:Object(v.jsxs)(u.a,{children:[Object(v.jsx)(ue.a.Brand,{to:"/",as:be.b,children:"Lempel-Ziv Playground"}),Object(v.jsx)(ue.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(v.jsxs)(ue.a.Collapse,{id:"responsive-navbar-nav",children:[Object(v.jsx)(je.a,{className:"mr-auto",children:t.map((function(t){var n=t.to,r=t.title,s=t.icon;return Object(v.jsxs)(je.a.Link,{to:n,as:be.b,active:e.pathname===n,children:[Object(v.jsx)(g.a,{icon:s})," ",r]},n)}))}),Object(v.jsx)(je.a,{className:"justify-content-end",children:Object(v.jsxs)(je.a.Link,{href:"https://github.com/jannikw/lempel-ziv",target:"_blank",children:[Object(v.jsx)(g.a,{icon:pe.a})," Source Code"]})})]})]})})}function xe(){var e=oe(),t=e.type,n=e.input,s=e.step,c=D(t,n,e.settings),a=Object(r.useState)(0),i=Object(l.a)(a,2),o=i[0],p=i[1];return Object(r.useEffect)((function(){p(s)}),[s]),Object(v.jsxs)(u.a,{fluid:!0,className:"h-100",children:[Object(v.jsx)(b.a,{className:"justify-content-center overflow-auto",children:Object(v.jsxs)(h.a,{xs:"auto",children:["lz-like"===(null===c||void 0===c?void 0:c.type)&&Object(v.jsx)(ee,{data:c,step:o}),"rlz"===(null===c||void 0===c?void 0:c.type)&&Object(v.jsx)(te,{data:c,step:o}),"relz"===c.type&&Object(v.jsx)(ne,{data:c,step:o}),"relz-rec"===c.type&&Object(v.jsx)(re,{data:c,step:o})]})}),Object(v.jsx)(b.a,{className:"mb-3 justify-content-center",style:{position:"absolute",bottom:"0",width:"100%"},children:Object(v.jsx)(h.a,{lg:"8",md:"12",children:Object(v.jsx)(ae,{step:o,stepsTotal:c.steps.length,stepChanged:p})})})]})}function fe(){return Object(v.jsx)(u.a,{})}var de=n(63);function Oe(){return Object(v.jsx)(u.a,{className:"mt-5",children:Object(v.jsxs)(de.a,{children:[Object(v.jsx)("h1",{children:"Lempel-Ziv Playground"}),Object(v.jsxs)("p",{children:["This page lets you play around with the original Lempel-Ziv algorithm from 1977 and other variants of the algorithm. You can compare different Lempel-Ziv variants with each other"," ",Object(v.jsx)(be.b,{to:"/compare",children:"here"})," and find out what parameters work well on different inputs. You can go through the compression process step by step for each algorithm and see how an input is processed"," ",Object(v.jsx)(be.b,{to:"/slides",children:"here"}),". Finally, you can take a quiz on the algorithms and think about some properties of the algorithms"," ",Object(v.jsx)(be.b,{to:"/quiz",children:"here"}),"."]})]})})}var me=function(){var e=function(){var e=Object(i.f)();return ie().has("embed")||"/embed"===e.pathname}();return Object(v.jsxs)(v.Fragment,{children:[!e&&Object(v.jsx)(he,{}),Object(v.jsxs)(i.c,{children:[Object(v.jsx)(i.a,{exact:!0,path:"/",children:Object(v.jsx)(Oe,{})}),Object(v.jsx)(i.a,{exact:!0,path:"/compare",children:Object(v.jsx)($,{})}),Object(v.jsx)(i.a,{exact:!0,path:"/steps",children:Object(v.jsx)(le,{})}),Object(v.jsx)(i.a,{exact:!0,path:"/quiz",children:Object(v.jsx)(fe,{})}),Object(v.jsx)(i.a,{exact:!0,path:"/embed",children:Object(v.jsx)(xe,{})})]})]})},ge=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,89)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),r(e),s(e),c(e),a(e)}))};a.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(be.a,{children:Object(v.jsx)(me,{})})}),document.getElementById("root")),ge()}},[[84,1,2]]]);
//# sourceMappingURL=main.35eb6df2.chunk.js.map